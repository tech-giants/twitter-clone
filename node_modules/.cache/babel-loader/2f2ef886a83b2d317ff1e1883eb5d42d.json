{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\n\nconst ParserHelpers = require(\"./ParserHelpers\");\n\nclass CommonJsStuffPlugin {\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"CommonJsStuffPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      const handler = (parser, parserOptions) => {\n        parser.hooks.expression.for(\"require.main.require\").tap(\"CommonJsStuffPlugin\", ParserHelpers.expressionIsUnsupported(parser, \"require.main.require is not supported by webpack.\"));\n        parser.hooks.expression.for(\"module.parent.require\").tap(\"CommonJsStuffPlugin\", ParserHelpers.expressionIsUnsupported(parser, \"module.parent.require is not supported by webpack.\"));\n        parser.hooks.expression.for(\"require.main\").tap(\"CommonJsStuffPlugin\", ParserHelpers.toConstantDependencyWithWebpackRequire(parser, \"__webpack_require__.c[__webpack_require__.s]\"));\n        parser.hooks.expression.for(\"module.loaded\").tap(\"CommonJsStuffPlugin\", expr => {\n          parser.state.module.buildMeta.moduleConcatenationBailout = \"module.loaded\";\n          return ParserHelpers.toConstantDependency(parser, \"module.l\")(expr);\n        });\n        parser.hooks.expression.for(\"module.id\").tap(\"CommonJsStuffPlugin\", expr => {\n          parser.state.module.buildMeta.moduleConcatenationBailout = \"module.id\";\n          return ParserHelpers.toConstantDependency(parser, \"module.i\")(expr);\n        });\n        parser.hooks.expression.for(\"module.exports\").tap(\"CommonJsStuffPlugin\", () => {\n          const module = parser.state.module;\n          const isHarmony = module.buildMeta && module.buildMeta.exportsType;\n          if (!isHarmony) return true;\n        });\n        parser.hooks.evaluateIdentifier.for(\"module.hot\").tap(\"CommonJsStuffPlugin\", ParserHelpers.evaluateToIdentifier(\"module.hot\", false));\n        parser.hooks.expression.for(\"module\").tap(\"CommonJsStuffPlugin\", () => {\n          const module = parser.state.module;\n          const isHarmony = module.buildMeta && module.buildMeta.exportsType;\n          let moduleJsPath = path.join(__dirname, \"..\", \"buildin\", isHarmony ? \"harmony-module.js\" : \"module.js\");\n\n          if (module.context) {\n            moduleJsPath = path.relative(parser.state.module.context, moduleJsPath);\n\n            if (!/^[A-Z]:/i.test(moduleJsPath)) {\n              moduleJsPath = `./${moduleJsPath.replace(/\\\\/g, \"/\")}`;\n            }\n          }\n\n          return ParserHelpers.addParsedVariableToModule(parser, \"module\", `require(${JSON.stringify(moduleJsPath)})(module)`);\n        });\n      };\n\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"CommonJsStuffPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"CommonJsStuffPlugin\", handler);\n    });\n  }\n\n}\n\nmodule.exports = CommonJsStuffPlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/CommonJsStuffPlugin.js"],"names":["path","require","ParserHelpers","CommonJsStuffPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","handler","parser","parserOptions","expression","for","expressionIsUnsupported","toConstantDependencyWithWebpackRequire","expr","state","module","buildMeta","moduleConcatenationBailout","toConstantDependency","isHarmony","exportsType","evaluateIdentifier","evaluateToIdentifier","moduleJsPath","join","__dirname","context","relative","test","replace","addParsedVariableToModule","JSON","stringify","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\nconst ParserHelpers = require(\"./ParserHelpers\");\n\nclass CommonJsStuffPlugin {\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"CommonJsStuffPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"require.main.require\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\"CommonJsStuffPlugin\",\n\t\t\t\t\t\t\tParserHelpers.expressionIsUnsupported(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"require.main.require is not supported by webpack.\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"module.parent.require\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\"CommonJsStuffPlugin\",\n\t\t\t\t\t\t\tParserHelpers.expressionIsUnsupported(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"module.parent.require is not supported by webpack.\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"require.main\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\"CommonJsStuffPlugin\",\n\t\t\t\t\t\t\tParserHelpers.toConstantDependencyWithWebpackRequire(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"__webpack_require__.c[__webpack_require__.s]\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"module.loaded\")\n\t\t\t\t\t\t.tap(\"CommonJsStuffPlugin\", expr => {\n\t\t\t\t\t\t\tparser.state.module.buildMeta.moduleConcatenationBailout =\n\t\t\t\t\t\t\t\t\"module.loaded\";\n\t\t\t\t\t\t\treturn ParserHelpers.toConstantDependency(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"module.l\"\n\t\t\t\t\t\t\t)(expr);\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"module.id\")\n\t\t\t\t\t\t.tap(\"CommonJsStuffPlugin\", expr => {\n\t\t\t\t\t\t\tparser.state.module.buildMeta.moduleConcatenationBailout =\n\t\t\t\t\t\t\t\t\"module.id\";\n\t\t\t\t\t\t\treturn ParserHelpers.toConstantDependency(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"module.i\"\n\t\t\t\t\t\t\t)(expr);\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"module.exports\")\n\t\t\t\t\t\t.tap(\"CommonJsStuffPlugin\", () => {\n\t\t\t\t\t\t\tconst module = parser.state.module;\n\t\t\t\t\t\t\tconst isHarmony =\n\t\t\t\t\t\t\t\tmodule.buildMeta && module.buildMeta.exportsType;\n\t\t\t\t\t\t\tif (!isHarmony) return true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t.for(\"module.hot\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\"CommonJsStuffPlugin\",\n\t\t\t\t\t\t\tParserHelpers.evaluateToIdentifier(\"module.hot\", false)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"module\")\n\t\t\t\t\t\t.tap(\"CommonJsStuffPlugin\", () => {\n\t\t\t\t\t\t\tconst module = parser.state.module;\n\t\t\t\t\t\t\tconst isHarmony =\n\t\t\t\t\t\t\t\tmodule.buildMeta && module.buildMeta.exportsType;\n\t\t\t\t\t\t\tlet moduleJsPath = path.join(\n\t\t\t\t\t\t\t\t__dirname,\n\t\t\t\t\t\t\t\t\"..\",\n\t\t\t\t\t\t\t\t\"buildin\",\n\t\t\t\t\t\t\t\tisHarmony ? \"harmony-module.js\" : \"module.js\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (module.context) {\n\t\t\t\t\t\t\t\tmoduleJsPath = path.relative(\n\t\t\t\t\t\t\t\t\tparser.state.module.context,\n\t\t\t\t\t\t\t\t\tmoduleJsPath\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (!/^[A-Z]:/i.test(moduleJsPath)) {\n\t\t\t\t\t\t\t\t\tmoduleJsPath = `./${moduleJsPath.replace(/\\\\/g, \"/\")}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn ParserHelpers.addParsedVariableToModule(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"module\",\n\t\t\t\t\t\t\t\t`require(${JSON.stringify(moduleJsPath)})(module)`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"CommonJsStuffPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"CommonJsStuffPlugin\", handler);\n\t\t\t}\n\t\t);\n\t}\n}\nmodule.exports = CommonJsStuffPlugin;\n"]},"metadata":{},"sourceType":"script"}