{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst CommonJsRequireDependency = require(\"./CommonJsRequireDependency\");\n\nconst CommonJsRequireContextDependency = require(\"./CommonJsRequireContextDependency\");\n\nconst RequireHeaderDependency = require(\"./RequireHeaderDependency\");\n\nconst LocalModuleDependency = require(\"./LocalModuleDependency\");\n\nconst ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\n\nconst LocalModulesHelpers = require(\"./LocalModulesHelpers\");\n\nconst ParserHelpers = require(\"../ParserHelpers\");\n\nclass CommonJsRequireDependencyParserPlugin {\n  constructor(options) {\n    this.options = options;\n  }\n\n  apply(parser) {\n    const options = this.options;\n\n    const processItem = (expr, param) => {\n      if (param.isString()) {\n        const dep = new CommonJsRequireDependency(param.string, param.range);\n        dep.loc = expr.loc;\n        dep.optional = !!parser.scope.inTry;\n        parser.state.current.addDependency(dep);\n        return true;\n      }\n    };\n\n    const processContext = (expr, param) => {\n      const dep = ContextDependencyHelpers.create(CommonJsRequireContextDependency, expr.range, param, expr, options, {}, parser);\n      if (!dep) return;\n      dep.loc = expr.loc;\n      dep.optional = !!parser.scope.inTry;\n      parser.state.current.addDependency(dep);\n      return true;\n    };\n\n    parser.hooks.expression.for(\"require.cache\").tap(\"CommonJsRequireDependencyParserPlugin\", ParserHelpers.toConstantDependencyWithWebpackRequire(parser, \"__webpack_require__.c\"));\n    parser.hooks.expression.for(\"require\").tap(\"CommonJsRequireDependencyParserPlugin\", expr => {\n      const dep = new CommonJsRequireContextDependency({\n        request: options.unknownContextRequest,\n        recursive: options.unknownContextRecursive,\n        regExp: options.unknownContextRegExp,\n        mode: \"sync\"\n      }, expr.range);\n      dep.critical = options.unknownContextCritical && \"require function is used in a way in which dependencies cannot be statically extracted\";\n      dep.loc = expr.loc;\n      dep.optional = !!parser.scope.inTry;\n      parser.state.current.addDependency(dep);\n      return true;\n    });\n\n    const createHandler = callNew => expr => {\n      if (expr.arguments.length !== 1) return;\n      let localModule;\n      const param = parser.evaluateExpression(expr.arguments[0]);\n\n      if (param.isConditional()) {\n        let isExpression = false;\n        const prevLength = parser.state.current.dependencies.length;\n        const dep = new RequireHeaderDependency(expr.callee.range);\n        dep.loc = expr.loc;\n        parser.state.current.addDependency(dep);\n\n        for (const p of param.options) {\n          const result = processItem(expr, p);\n\n          if (result === undefined) {\n            isExpression = true;\n          }\n        }\n\n        if (isExpression) {\n          parser.state.current.dependencies.length = prevLength;\n        } else {\n          return true;\n        }\n      }\n\n      if (param.isString() && (localModule = LocalModulesHelpers.getLocalModule(parser.state, param.string))) {\n        const dep = new LocalModuleDependency(localModule, expr.range, callNew);\n        dep.loc = expr.loc;\n        parser.state.current.addDependency(dep);\n        return true;\n      } else {\n        const result = processItem(expr, param);\n\n        if (result === undefined) {\n          processContext(expr, param);\n        } else {\n          const dep = new RequireHeaderDependency(expr.callee.range);\n          dep.loc = expr.loc;\n          parser.state.current.addDependency(dep);\n        }\n\n        return true;\n      }\n    };\n\n    parser.hooks.call.for(\"require\").tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(false));\n    parser.hooks.new.for(\"require\").tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(true));\n    parser.hooks.call.for(\"module.require\").tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(false));\n    parser.hooks.new.for(\"module.require\").tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(true));\n  }\n\n}\n\nmodule.exports = CommonJsRequireDependencyParserPlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/dependencies/CommonJsRequireDependencyParserPlugin.js"],"names":["CommonJsRequireDependency","require","CommonJsRequireContextDependency","RequireHeaderDependency","LocalModuleDependency","ContextDependencyHelpers","LocalModulesHelpers","ParserHelpers","CommonJsRequireDependencyParserPlugin","constructor","options","apply","parser","processItem","expr","param","isString","dep","string","range","loc","optional","scope","inTry","state","current","addDependency","processContext","create","hooks","expression","for","tap","toConstantDependencyWithWebpackRequire","request","unknownContextRequest","recursive","unknownContextRecursive","regExp","unknownContextRegExp","mode","critical","unknownContextCritical","createHandler","callNew","arguments","length","localModule","evaluateExpression","isConditional","isExpression","prevLength","dependencies","callee","p","result","undefined","getLocalModule","call","new","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst CommonJsRequireDependency = require(\"./CommonJsRequireDependency\");\nconst CommonJsRequireContextDependency = require(\"./CommonJsRequireContextDependency\");\nconst RequireHeaderDependency = require(\"./RequireHeaderDependency\");\nconst LocalModuleDependency = require(\"./LocalModuleDependency\");\nconst ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\nconst LocalModulesHelpers = require(\"./LocalModulesHelpers\");\nconst ParserHelpers = require(\"../ParserHelpers\");\n\nclass CommonJsRequireDependencyParserPlugin {\n\tconstructor(options) {\n\t\tthis.options = options;\n\t}\n\n\tapply(parser) {\n\t\tconst options = this.options;\n\n\t\tconst processItem = (expr, param) => {\n\t\t\tif (param.isString()) {\n\t\t\t\tconst dep = new CommonJsRequireDependency(param.string, param.range);\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tdep.optional = !!parser.scope.inTry;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tconst processContext = (expr, param) => {\n\t\t\tconst dep = ContextDependencyHelpers.create(\n\t\t\t\tCommonJsRequireContextDependency,\n\t\t\t\texpr.range,\n\t\t\t\tparam,\n\t\t\t\texpr,\n\t\t\t\toptions,\n\t\t\t\t{},\n\t\t\t\tparser\n\t\t\t);\n\t\t\tif (!dep) return;\n\t\t\tdep.loc = expr.loc;\n\t\t\tdep.optional = !!parser.scope.inTry;\n\t\t\tparser.state.current.addDependency(dep);\n\t\t\treturn true;\n\t\t};\n\n\t\tparser.hooks.expression\n\t\t\t.for(\"require.cache\")\n\t\t\t.tap(\n\t\t\t\t\"CommonJsRequireDependencyParserPlugin\",\n\t\t\t\tParserHelpers.toConstantDependencyWithWebpackRequire(\n\t\t\t\t\tparser,\n\t\t\t\t\t\"__webpack_require__.c\"\n\t\t\t\t)\n\t\t\t);\n\t\tparser.hooks.expression\n\t\t\t.for(\"require\")\n\t\t\t.tap(\"CommonJsRequireDependencyParserPlugin\", expr => {\n\t\t\t\tconst dep = new CommonJsRequireContextDependency(\n\t\t\t\t\t{\n\t\t\t\t\t\trequest: options.unknownContextRequest,\n\t\t\t\t\t\trecursive: options.unknownContextRecursive,\n\t\t\t\t\t\tregExp: options.unknownContextRegExp,\n\t\t\t\t\t\tmode: \"sync\"\n\t\t\t\t\t},\n\t\t\t\t\texpr.range\n\t\t\t\t);\n\t\t\t\tdep.critical =\n\t\t\t\t\toptions.unknownContextCritical &&\n\t\t\t\t\t\"require function is used in a way in which dependencies cannot be statically extracted\";\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tdep.optional = !!parser.scope.inTry;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\tconst createHandler = callNew => expr => {\n\t\t\tif (expr.arguments.length !== 1) return;\n\t\t\tlet localModule;\n\t\t\tconst param = parser.evaluateExpression(expr.arguments[0]);\n\t\t\tif (param.isConditional()) {\n\t\t\t\tlet isExpression = false;\n\t\t\t\tconst prevLength = parser.state.current.dependencies.length;\n\t\t\t\tconst dep = new RequireHeaderDependency(expr.callee.range);\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\tfor (const p of param.options) {\n\t\t\t\t\tconst result = processItem(expr, p);\n\t\t\t\t\tif (result === undefined) {\n\t\t\t\t\t\tisExpression = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isExpression) {\n\t\t\t\t\tparser.state.current.dependencies.length = prevLength;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparam.isString() &&\n\t\t\t\t(localModule = LocalModulesHelpers.getLocalModule(\n\t\t\t\t\tparser.state,\n\t\t\t\t\tparam.string\n\t\t\t\t))\n\t\t\t) {\n\t\t\t\tconst dep = new LocalModuleDependency(localModule, expr.range, callNew);\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst result = processItem(expr, param);\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tprocessContext(expr, param);\n\t\t\t\t} else {\n\t\t\t\t\tconst dep = new RequireHeaderDependency(expr.callee.range);\n\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\tparser.state.current.addDependency(dep);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tparser.hooks.call\n\t\t\t.for(\"require\")\n\t\t\t.tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(false));\n\t\tparser.hooks.new\n\t\t\t.for(\"require\")\n\t\t\t.tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(true));\n\t\tparser.hooks.call\n\t\t\t.for(\"module.require\")\n\t\t\t.tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(false));\n\t\tparser.hooks.new\n\t\t\t.for(\"module.require\")\n\t\t\t.tap(\"CommonJsRequireDependencyParserPlugin\", createHandler(true));\n\t}\n}\nmodule.exports = CommonJsRequireDependencyParserPlugin;\n"]},"metadata":{},"sourceType":"script"}