{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nfunction startsWith(string, searchString) {\n  const stringLength = string.length;\n  const searchLength = searchString.length; // early out if the search length is greater than the search string\n\n  if (searchLength > stringLength) {\n    return false;\n  }\n\n  let index = -1;\n\n  while (++index < searchLength) {\n    if (string.charCodeAt(index) !== searchString.charCodeAt(index)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = class AliasPlugin {\n  constructor(source, options, target) {\n    this.source = source;\n    this.options = Array.isArray(options) ? options : [options];\n    this.target = target;\n  }\n\n  apply(resolver) {\n    const target = resolver.ensureHook(this.target);\n    resolver.getHook(this.source).tapAsync(\"AliasPlugin\", (request, resolveContext, callback) => {\n      const innerRequest = request.request || request.path;\n      if (!innerRequest) return callback();\n\n      for (const item of this.options) {\n        if (innerRequest === item.name || !item.onlyModule && startsWith(innerRequest, item.name + \"/\")) {\n          if (innerRequest !== item.alias && !startsWith(innerRequest, item.alias + \"/\")) {\n            const newRequestStr = item.alias + innerRequest.substr(item.name.length);\n            const obj = Object.assign({}, request, {\n              request: newRequestStr\n            });\n            return resolver.doResolve(target, obj, \"aliased with mapping '\" + item.name + \"': '\" + item.alias + \"' to '\" + newRequestStr + \"'\", resolveContext, (err, result) => {\n              if (err) return callback(err); // Don't allow other aliasing or raw request\n\n              if (result === undefined) return callback(null, null);\n              callback(null, result);\n            });\n          }\n        }\n      }\n\n      return callback();\n    });\n  }\n\n};","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/enhanced-resolve/lib/AliasPlugin.js"],"names":["startsWith","string","searchString","stringLength","length","searchLength","index","charCodeAt","module","exports","AliasPlugin","constructor","source","options","target","Array","isArray","apply","resolver","ensureHook","getHook","tapAsync","request","resolveContext","callback","innerRequest","path","item","name","onlyModule","alias","newRequestStr","substr","obj","Object","assign","doResolve","err","result","undefined"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,SAASA,UAAT,CAAoBC,MAApB,EAA4BC,YAA5B,EAA0C;AACzC,QAAMC,YAAY,GAAGF,MAAM,CAACG,MAA5B;AACA,QAAMC,YAAY,GAAGH,YAAY,CAACE,MAAlC,CAFyC,CAIzC;;AACA,MAAIC,YAAY,GAAGF,YAAnB,EAAiC;AAChC,WAAO,KAAP;AACA;;AACD,MAAIG,KAAK,GAAG,CAAC,CAAb;;AACA,SAAO,EAAEA,KAAF,GAAUD,YAAjB,EAA+B;AAC9B,QAAIJ,MAAM,CAACM,UAAP,CAAkBD,KAAlB,MAA6BJ,YAAY,CAACK,UAAb,CAAwBD,KAAxB,CAAjC,EAAiE;AAChE,aAAO,KAAP;AACA;AACD;;AACD,SAAO,IAAP;AACA;;AAEDE,MAAM,CAACC,OAAP,GAAiB,MAAMC,WAAN,CAAkB;AAClCC,EAAAA,WAAW,CAACC,MAAD,EAASC,OAAT,EAAkBC,MAAlB,EAA0B;AACpC,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeE,KAAK,CAACC,OAAN,CAAcH,OAAd,IAAyBA,OAAzB,GAAmC,CAACA,OAAD,CAAlD;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA;;AAEDG,EAAAA,KAAK,CAACC,QAAD,EAAW;AACf,UAAMJ,MAAM,GAAGI,QAAQ,CAACC,UAAT,CAAoB,KAAKL,MAAzB,CAAf;AACAI,IAAAA,QAAQ,CACNE,OADF,CACU,KAAKR,MADf,EAEES,QAFF,CAEW,aAFX,EAE0B,CAACC,OAAD,EAAUC,cAAV,EAA0BC,QAA1B,KAAuC;AAC/D,YAAMC,YAAY,GAAGH,OAAO,CAACA,OAAR,IAAmBA,OAAO,CAACI,IAAhD;AACA,UAAI,CAACD,YAAL,EAAmB,OAAOD,QAAQ,EAAf;;AACnB,WAAK,MAAMG,IAAX,IAAmB,KAAKd,OAAxB,EAAiC;AAChC,YACCY,YAAY,KAAKE,IAAI,CAACC,IAAtB,IACC,CAACD,IAAI,CAACE,UAAN,IAAoB7B,UAAU,CAACyB,YAAD,EAAeE,IAAI,CAACC,IAAL,GAAY,GAA3B,CAFhC,EAGE;AACD,cACCH,YAAY,KAAKE,IAAI,CAACG,KAAtB,IACA,CAAC9B,UAAU,CAACyB,YAAD,EAAeE,IAAI,CAACG,KAAL,GAAa,GAA5B,CAFZ,EAGE;AACD,kBAAMC,aAAa,GAClBJ,IAAI,CAACG,KAAL,GAAaL,YAAY,CAACO,MAAb,CAAoBL,IAAI,CAACC,IAAL,CAAUxB,MAA9B,CADd;AAEA,kBAAM6B,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,OAAlB,EAA2B;AACtCA,cAAAA,OAAO,EAAES;AAD6B,aAA3B,CAAZ;AAGA,mBAAOb,QAAQ,CAACkB,SAAT,CACNtB,MADM,EAENmB,GAFM,EAGN,2BACCN,IAAI,CAACC,IADN,GAEC,MAFD,GAGCD,IAAI,CAACG,KAHN,GAIC,QAJD,GAKCC,aALD,GAMC,GATK,EAUNR,cAVM,EAWN,CAACc,GAAD,EAAMC,MAAN,KAAiB;AAChB,kBAAID,GAAJ,EAAS,OAAOb,QAAQ,CAACa,GAAD,CAAf,CADO,CAGhB;;AACA,kBAAIC,MAAM,KAAKC,SAAf,EAA0B,OAAOf,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;AAC1BA,cAAAA,QAAQ,CAAC,IAAD,EAAOc,MAAP,CAAR;AACA,aAjBK,CAAP;AAmBA;AACD;AACD;;AACD,aAAOd,QAAQ,EAAf;AACA,KA1CF;AA2CA;;AApDiC,CAAnC","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nfunction startsWith(string, searchString) {\n\tconst stringLength = string.length;\n\tconst searchLength = searchString.length;\n\n\t// early out if the search length is greater than the search string\n\tif (searchLength > stringLength) {\n\t\treturn false;\n\t}\n\tlet index = -1;\n\twhile (++index < searchLength) {\n\t\tif (string.charCodeAt(index) !== searchString.charCodeAt(index)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nmodule.exports = class AliasPlugin {\n\tconstructor(source, options, target) {\n\t\tthis.source = source;\n\t\tthis.options = Array.isArray(options) ? options : [options];\n\t\tthis.target = target;\n\t}\n\n\tapply(resolver) {\n\t\tconst target = resolver.ensureHook(this.target);\n\t\tresolver\n\t\t\t.getHook(this.source)\n\t\t\t.tapAsync(\"AliasPlugin\", (request, resolveContext, callback) => {\n\t\t\t\tconst innerRequest = request.request || request.path;\n\t\t\t\tif (!innerRequest) return callback();\n\t\t\t\tfor (const item of this.options) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tinnerRequest === item.name ||\n\t\t\t\t\t\t(!item.onlyModule && startsWith(innerRequest, item.name + \"/\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tinnerRequest !== item.alias &&\n\t\t\t\t\t\t\t!startsWith(innerRequest, item.alias + \"/\")\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst newRequestStr =\n\t\t\t\t\t\t\t\titem.alias + innerRequest.substr(item.name.length);\n\t\t\t\t\t\t\tconst obj = Object.assign({}, request, {\n\t\t\t\t\t\t\t\trequest: newRequestStr\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn resolver.doResolve(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tobj,\n\t\t\t\t\t\t\t\t\"aliased with mapping '\" +\n\t\t\t\t\t\t\t\t\titem.name +\n\t\t\t\t\t\t\t\t\t\"': '\" +\n\t\t\t\t\t\t\t\t\titem.alias +\n\t\t\t\t\t\t\t\t\t\"' to '\" +\n\t\t\t\t\t\t\t\t\tnewRequestStr +\n\t\t\t\t\t\t\t\t\t\"'\",\n\t\t\t\t\t\t\t\tresolveContext,\n\t\t\t\t\t\t\t\t(err, result) => {\n\t\t\t\t\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t\t\t\t\t// Don't allow other aliasing or raw request\n\t\t\t\t\t\t\t\t\tif (result === undefined) return callback(null, null);\n\t\t\t\t\t\t\t\t\tcallback(null, result);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn callback();\n\t\t\t});\n\t}\n};\n"]},"metadata":{},"sourceType":"script"}