{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst createHash = require(\"./util/createHash\");\n\nconst RequestShortener = require(\"./RequestShortener\");\n\nconst getHash = str => {\n  const hash = createHash(\"md4\");\n  hash.update(str);\n  const digest = hash.digest(\"hex\");\n  return digest.substr(0, 4);\n};\n\nclass NamedModulesPlugin {\n  constructor(options) {\n    this.options = options || {};\n  }\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"NamedModulesPlugin\", compilation => {\n      compilation.hooks.beforeModuleIds.tap(\"NamedModulesPlugin\", modules => {\n        const namedModules = new Map();\n        const context = this.options.context || compiler.options.context;\n\n        for (const module of modules) {\n          if (module.id === null && module.libIdent) {\n            module.id = module.libIdent({\n              context\n            });\n          }\n\n          if (module.id !== null) {\n            const namedModule = namedModules.get(module.id);\n\n            if (namedModule !== undefined) {\n              namedModule.push(module);\n            } else {\n              namedModules.set(module.id, [module]);\n            }\n          }\n        }\n\n        for (const namedModule of namedModules.values()) {\n          if (namedModule.length > 1) {\n            for (const module of namedModule) {\n              const requestShortener = new RequestShortener(context);\n              module.id = `${module.id}?${getHash(requestShortener.shorten(module.identifier()))}`;\n            }\n          }\n        }\n      });\n    });\n  }\n\n}\n\nmodule.exports = NamedModulesPlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/NamedModulesPlugin.js"],"names":["createHash","require","RequestShortener","getHash","str","hash","update","digest","substr","NamedModulesPlugin","constructor","options","apply","compiler","hooks","compilation","tap","beforeModuleIds","modules","namedModules","Map","context","module","id","libIdent","namedModule","get","undefined","push","set","values","length","requestShortener","shorten","identifier","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,UAAU,GAAGC,OAAO,CAAC,mBAAD,CAA1B;;AACA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,oBAAD,CAAhC;;AAEA,MAAME,OAAO,GAAGC,GAAG,IAAI;AACtB,QAAMC,IAAI,GAAGL,UAAU,CAAC,KAAD,CAAvB;AACAK,EAAAA,IAAI,CAACC,MAAL,CAAYF,GAAZ;AACA,QAAMG,MAAM,GAA0BF,IAAI,CAACE,MAAL,CAAY,KAAZ,CAAtC;AACA,SAAOA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiB,CAAjB,CAAP;AACA,CALD;;AAOA,MAAMC,kBAAN,CAAyB;AACxBC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACpB,SAAKA,OAAL,GAAeA,OAAO,IAAI,EAA1B;AACA;;AAEDC,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,oBAA/B,EAAqDD,WAAW,IAAI;AACnEA,MAAAA,WAAW,CAACD,KAAZ,CAAkBG,eAAlB,CAAkCD,GAAlC,CAAsC,oBAAtC,EAA4DE,OAAO,IAAI;AACtE,cAAMC,YAAY,GAAG,IAAIC,GAAJ,EAArB;AACA,cAAMC,OAAO,GAAG,KAAKV,OAAL,CAAaU,OAAb,IAAwBR,QAAQ,CAACF,OAAT,CAAiBU,OAAzD;;AAEA,aAAK,MAAMC,MAAX,IAAqBJ,OAArB,EAA8B;AAC7B,cAAII,MAAM,CAACC,EAAP,KAAc,IAAd,IAAsBD,MAAM,CAACE,QAAjC,EAA2C;AAC1CF,YAAAA,MAAM,CAACC,EAAP,GAAYD,MAAM,CAACE,QAAP,CAAgB;AAAEH,cAAAA;AAAF,aAAhB,CAAZ;AACA;;AAED,cAAIC,MAAM,CAACC,EAAP,KAAc,IAAlB,EAAwB;AACvB,kBAAME,WAAW,GAAGN,YAAY,CAACO,GAAb,CAAiBJ,MAAM,CAACC,EAAxB,CAApB;;AACA,gBAAIE,WAAW,KAAKE,SAApB,EAA+B;AAC9BF,cAAAA,WAAW,CAACG,IAAZ,CAAiBN,MAAjB;AACA,aAFD,MAEO;AACNH,cAAAA,YAAY,CAACU,GAAb,CAAiBP,MAAM,CAACC,EAAxB,EAA4B,CAACD,MAAD,CAA5B;AACA;AACD;AACD;;AAED,aAAK,MAAMG,WAAX,IAA0BN,YAAY,CAACW,MAAb,EAA1B,EAAiD;AAChD,cAAIL,WAAW,CAACM,MAAZ,GAAqB,CAAzB,EAA4B;AAC3B,iBAAK,MAAMT,MAAX,IAAqBG,WAArB,EAAkC;AACjC,oBAAMO,gBAAgB,GAAG,IAAI9B,gBAAJ,CAAqBmB,OAArB,CAAzB;AACAC,cAAAA,MAAM,CAACC,EAAP,GAAa,GAAED,MAAM,CAACC,EAAG,IAAGpB,OAAO,CAClC6B,gBAAgB,CAACC,OAAjB,CAAyBX,MAAM,CAACY,UAAP,EAAzB,CADkC,CAEjC,EAFF;AAGA;AACD;AACD;AACD,OA7BD;AA8BA,KA/BD;AAgCA;;AAtCuB;;AAyCzBZ,MAAM,CAACa,OAAP,GAAiB1B,kBAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst createHash = require(\"./util/createHash\");\nconst RequestShortener = require(\"./RequestShortener\");\n\nconst getHash = str => {\n\tconst hash = createHash(\"md4\");\n\thash.update(str);\n\tconst digest = /** @type {string} */ (hash.digest(\"hex\"));\n\treturn digest.substr(0, 4);\n};\n\nclass NamedModulesPlugin {\n\tconstructor(options) {\n\t\tthis.options = options || {};\n\t}\n\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\"NamedModulesPlugin\", compilation => {\n\t\t\tcompilation.hooks.beforeModuleIds.tap(\"NamedModulesPlugin\", modules => {\n\t\t\t\tconst namedModules = new Map();\n\t\t\t\tconst context = this.options.context || compiler.options.context;\n\n\t\t\t\tfor (const module of modules) {\n\t\t\t\t\tif (module.id === null && module.libIdent) {\n\t\t\t\t\t\tmodule.id = module.libIdent({ context });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (module.id !== null) {\n\t\t\t\t\t\tconst namedModule = namedModules.get(module.id);\n\t\t\t\t\t\tif (namedModule !== undefined) {\n\t\t\t\t\t\t\tnamedModule.push(module);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnamedModules.set(module.id, [module]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const namedModule of namedModules.values()) {\n\t\t\t\t\tif (namedModule.length > 1) {\n\t\t\t\t\t\tfor (const module of namedModule) {\n\t\t\t\t\t\t\tconst requestShortener = new RequestShortener(context);\n\t\t\t\t\t\t\tmodule.id = `${module.id}?${getHash(\n\t\t\t\t\t\t\t\trequestShortener.shorten(module.identifier())\n\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nmodule.exports = NamedModulesPlugin;\n"]},"metadata":{},"sourceType":"script"}