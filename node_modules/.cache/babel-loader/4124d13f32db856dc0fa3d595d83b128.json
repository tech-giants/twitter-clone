{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  RawSource\n} = require(\"webpack-sources\");\n\nconst ModuleFilenameHelpers = require(\"./ModuleFilenameHelpers\");\n\nconst {\n  absolutify\n} = require(\"./util/identifier\");\n\nconst cache = new WeakMap();\n\nclass EvalSourceMapDevToolModuleTemplatePlugin {\n  constructor(compilation, options) {\n    this.compilation = compilation;\n    this.sourceMapComment = options.append || \"//# sourceURL=[module]\\n//# sourceMappingURL=[url]\";\n    this.moduleFilenameTemplate = options.moduleFilenameTemplate || \"webpack://[namespace]/[resource-path]?[hash]\";\n    this.namespace = options.namespace || \"\";\n    this.options = options;\n  }\n\n  apply(moduleTemplate) {\n    const self = this;\n    const options = this.options;\n    const matchModule = ModuleFilenameHelpers.matchObject.bind(ModuleFilenameHelpers, options);\n    moduleTemplate.hooks.module.tap(\"EvalSourceMapDevToolModuleTemplatePlugin\", (source, module) => {\n      const cachedSource = cache.get(source);\n\n      if (cachedSource !== undefined) {\n        return cachedSource;\n      }\n\n      if (!matchModule(module.resource)) {\n        return source;\n      }\n      /** @type {{ [key: string]: TODO; }} */\n\n\n      let sourceMap;\n      let content;\n\n      if (source.sourceAndMap) {\n        const sourceAndMap = source.sourceAndMap(options);\n        sourceMap = sourceAndMap.map;\n        content = sourceAndMap.source;\n      } else {\n        sourceMap = source.map(options);\n        content = source.source();\n      }\n\n      if (!sourceMap) {\n        return source;\n      } // Clone (flat) the sourcemap to ensure that the mutations below do not persist.\n\n\n      sourceMap = Object.keys(sourceMap).reduce((obj, key) => {\n        obj[key] = sourceMap[key];\n        return obj;\n      }, {});\n      const context = this.compilation.compiler.options.context;\n      const modules = sourceMap.sources.map(source => {\n        if (source.startsWith(\"webpack://\")) {\n          source = absolutify(context, source.slice(10));\n        }\n\n        const module = self.compilation.findModule(source);\n        return module || source;\n      });\n      let moduleFilenames = modules.map(module => {\n        return ModuleFilenameHelpers.createFilename(module, {\n          moduleFilenameTemplate: self.moduleFilenameTemplate,\n          namespace: self.namespace\n        }, moduleTemplate.runtimeTemplate.requestShortener);\n      });\n      moduleFilenames = ModuleFilenameHelpers.replaceDuplicates(moduleFilenames, (filename, i, n) => {\n        for (let j = 0; j < n; j++) filename += \"*\";\n\n        return filename;\n      });\n      sourceMap.sources = moduleFilenames;\n      sourceMap.sourceRoot = options.sourceRoot || \"\";\n      sourceMap.file = `${module.id}.js`;\n      const footer = self.sourceMapComment.replace(/\\[url\\]/g, `data:application/json;charset=utf-8;base64,${Buffer.from(JSON.stringify(sourceMap), \"utf8\").toString(\"base64\")}`) + `\\n//# sourceURL=webpack-internal:///${module.id}\\n`; // workaround for chrome bug\n\n      const evalSource = new RawSource(`eval(${JSON.stringify(content + footer)});`);\n      cache.set(source, evalSource);\n      return evalSource;\n    });\n    moduleTemplate.hooks.hash.tap(\"EvalSourceMapDevToolModuleTemplatePlugin\", hash => {\n      hash.update(\"eval-source-map\");\n      hash.update(\"2\");\n    });\n  }\n\n}\n\nmodule.exports = EvalSourceMapDevToolModuleTemplatePlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js"],"names":["RawSource","require","ModuleFilenameHelpers","absolutify","cache","WeakMap","EvalSourceMapDevToolModuleTemplatePlugin","constructor","compilation","options","sourceMapComment","append","moduleFilenameTemplate","namespace","apply","moduleTemplate","self","matchModule","matchObject","bind","hooks","module","tap","source","cachedSource","get","undefined","resource","sourceMap","content","sourceAndMap","map","Object","keys","reduce","obj","key","context","compiler","modules","sources","startsWith","slice","findModule","moduleFilenames","createFilename","runtimeTemplate","requestShortener","replaceDuplicates","filename","i","n","j","sourceRoot","file","id","footer","replace","Buffer","from","JSON","stringify","toString","evalSource","set","hash","update","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst { RawSource } = require(\"webpack-sources\");\nconst ModuleFilenameHelpers = require(\"./ModuleFilenameHelpers\");\nconst { absolutify } = require(\"./util/identifier\");\n\nconst cache = new WeakMap();\n\nclass EvalSourceMapDevToolModuleTemplatePlugin {\n\tconstructor(compilation, options) {\n\t\tthis.compilation = compilation;\n\t\tthis.sourceMapComment =\n\t\t\toptions.append || \"//# sourceURL=[module]\\n//# sourceMappingURL=[url]\";\n\t\tthis.moduleFilenameTemplate =\n\t\t\toptions.moduleFilenameTemplate ||\n\t\t\t\"webpack://[namespace]/[resource-path]?[hash]\";\n\t\tthis.namespace = options.namespace || \"\";\n\t\tthis.options = options;\n\t}\n\n\tapply(moduleTemplate) {\n\t\tconst self = this;\n\t\tconst options = this.options;\n\t\tconst matchModule = ModuleFilenameHelpers.matchObject.bind(\n\t\t\tModuleFilenameHelpers,\n\t\t\toptions\n\t\t);\n\t\tmoduleTemplate.hooks.module.tap(\n\t\t\t\"EvalSourceMapDevToolModuleTemplatePlugin\",\n\t\t\t(source, module) => {\n\t\t\t\tconst cachedSource = cache.get(source);\n\t\t\t\tif (cachedSource !== undefined) {\n\t\t\t\t\treturn cachedSource;\n\t\t\t\t}\n\n\t\t\t\tif (!matchModule(module.resource)) {\n\t\t\t\t\treturn source;\n\t\t\t\t}\n\n\t\t\t\t/** @type {{ [key: string]: TODO; }} */\n\t\t\t\tlet sourceMap;\n\t\t\t\tlet content;\n\t\t\t\tif (source.sourceAndMap) {\n\t\t\t\t\tconst sourceAndMap = source.sourceAndMap(options);\n\t\t\t\t\tsourceMap = sourceAndMap.map;\n\t\t\t\t\tcontent = sourceAndMap.source;\n\t\t\t\t} else {\n\t\t\t\t\tsourceMap = source.map(options);\n\t\t\t\t\tcontent = source.source();\n\t\t\t\t}\n\t\t\t\tif (!sourceMap) {\n\t\t\t\t\treturn source;\n\t\t\t\t}\n\n\t\t\t\t// Clone (flat) the sourcemap to ensure that the mutations below do not persist.\n\t\t\t\tsourceMap = Object.keys(sourceMap).reduce((obj, key) => {\n\t\t\t\t\tobj[key] = sourceMap[key];\n\t\t\t\t\treturn obj;\n\t\t\t\t}, {});\n\t\t\t\tconst context = this.compilation.compiler.options.context;\n\t\t\t\tconst modules = sourceMap.sources.map(source => {\n\t\t\t\t\tif (source.startsWith(\"webpack://\")) {\n\t\t\t\t\t\tsource = absolutify(context, source.slice(10));\n\t\t\t\t\t}\n\t\t\t\t\tconst module = self.compilation.findModule(source);\n\t\t\t\t\treturn module || source;\n\t\t\t\t});\n\t\t\t\tlet moduleFilenames = modules.map(module => {\n\t\t\t\t\treturn ModuleFilenameHelpers.createFilename(\n\t\t\t\t\t\tmodule,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmoduleFilenameTemplate: self.moduleFilenameTemplate,\n\t\t\t\t\t\t\tnamespace: self.namespace\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmoduleTemplate.runtimeTemplate.requestShortener\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tmoduleFilenames = ModuleFilenameHelpers.replaceDuplicates(\n\t\t\t\t\tmoduleFilenames,\n\t\t\t\t\t(filename, i, n) => {\n\t\t\t\t\t\tfor (let j = 0; j < n; j++) filename += \"*\";\n\t\t\t\t\t\treturn filename;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tsourceMap.sources = moduleFilenames;\n\t\t\t\tsourceMap.sourceRoot = options.sourceRoot || \"\";\n\t\t\t\tsourceMap.file = `${module.id}.js`;\n\n\t\t\t\tconst footer =\n\t\t\t\t\tself.sourceMapComment.replace(\n\t\t\t\t\t\t/\\[url\\]/g,\n\t\t\t\t\t\t`data:application/json;charset=utf-8;base64,${Buffer.from(\n\t\t\t\t\t\t\tJSON.stringify(sourceMap),\n\t\t\t\t\t\t\t\"utf8\"\n\t\t\t\t\t\t).toString(\"base64\")}`\n\t\t\t\t\t) + `\\n//# sourceURL=webpack-internal:///${module.id}\\n`; // workaround for chrome bug\n\n\t\t\t\tconst evalSource = new RawSource(\n\t\t\t\t\t`eval(${JSON.stringify(content + footer)});`\n\t\t\t\t);\n\n\t\t\t\tcache.set(source, evalSource);\n\n\t\t\t\treturn evalSource;\n\t\t\t}\n\t\t);\n\t\tmoduleTemplate.hooks.hash.tap(\n\t\t\t\"EvalSourceMapDevToolModuleTemplatePlugin\",\n\t\t\thash => {\n\t\t\t\thash.update(\"eval-source-map\");\n\t\t\t\thash.update(\"2\");\n\t\t\t}\n\t\t);\n\t}\n}\nmodule.exports = EvalSourceMapDevToolModuleTemplatePlugin;\n"]},"metadata":{},"sourceType":"script"}