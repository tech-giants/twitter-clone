{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _sourceMap = require(\"source-map\");\n\nvar _webpackSources = require(\"webpack-sources\");\n\nvar _RequestShortener = _interopRequireDefault(require(\"webpack/lib/RequestShortener\"));\n\nvar _ModuleFilenameHelpers = _interopRequireDefault(require(\"webpack/lib/ModuleFilenameHelpers\"));\n\nvar _schemaUtils = _interopRequireDefault(require(\"schema-utils\"));\n\nvar _serializeJavascript = _interopRequireDefault(require(\"serialize-javascript\"));\n\nvar _package = _interopRequireDefault(require(\"terser/package.json\"));\n\nvar _options = _interopRequireDefault(require(\"./options.json\"));\n\nvar _TaskRunner = _interopRequireDefault(require(\"./TaskRunner\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst warningRegex = /\\[.+:([0-9]+),([0-9]+)\\]/;\n\nclass TerserPlugin {\n  constructor(options = {}) {\n    (0, _schemaUtils.default)(_options.default, options, 'Terser Plugin');\n    const {\n      minify,\n      terserOptions = {},\n      test = /\\.m?js(\\?.*)?$/i,\n      chunkFilter = () => true,\n      warningsFilter = () => true,\n      extractComments = false,\n      sourceMap = false,\n      cache = false,\n      cacheKeys = defaultCacheKeys => defaultCacheKeys,\n      parallel = false,\n      include,\n      exclude\n    } = options;\n    this.options = {\n      test,\n      chunkFilter,\n      warningsFilter,\n      extractComments,\n      sourceMap,\n      cache,\n      cacheKeys,\n      parallel,\n      include,\n      exclude,\n      minify,\n      terserOptions: _objectSpread({\n        output: {\n          comments: extractComments ? false : /^\\**!|@preserve|@license|@cc_on/i\n        }\n      }, terserOptions)\n    };\n  }\n\n  static isSourceMap(input) {\n    // All required options for `new SourceMapConsumer(...options)`\n    // https://github.com/mozilla/source-map#new-sourcemapconsumerrawsourcemap\n    return Boolean(input && input.version && input.sources && Array.isArray(input.sources) && typeof input.mappings === 'string');\n  }\n\n  static buildSourceMap(inputSourceMap) {\n    if (!inputSourceMap || !TerserPlugin.isSourceMap(inputSourceMap)) {\n      return null;\n    }\n\n    return new _sourceMap.SourceMapConsumer(inputSourceMap);\n  }\n\n  static buildError(err, file, sourceMap, requestShortener) {\n    // Handling error which should have line, col, filename and message\n    if (err.line) {\n      const original = sourceMap && sourceMap.originalPositionFor({\n        line: err.line,\n        column: err.col\n      });\n\n      if (original && original.source && requestShortener) {\n        return new Error(`${file} from Terser\\n${err.message} [${requestShortener.shorten(original.source)}:${original.line},${original.column}][${file}:${err.line},${err.col}]`);\n      }\n\n      return new Error(`${file} from Terser\\n${err.message} [${file}:${err.line},${err.col}]`);\n    } else if (err.stack) {\n      return new Error(`${file} from Terser\\n${err.stack}`);\n    }\n\n    return new Error(`${file} from Terser\\n${err.message}`);\n  }\n\n  static buildWarning(warning, file, sourceMap, requestShortener, warningsFilter) {\n    let warningMessage = warning;\n    let locationMessage = '';\n    let source = null;\n\n    if (sourceMap) {\n      const match = warningRegex.exec(warning);\n\n      if (match) {\n        const line = +match[1];\n        const column = +match[2];\n        const original = sourceMap.originalPositionFor({\n          line,\n          column\n        });\n\n        if (original && original.source && original.source !== file && requestShortener) {\n          ({\n            source\n          } = original);\n          warningMessage = `${warningMessage.replace(warningRegex, '')}`;\n          locationMessage = `[${requestShortener.shorten(original.source)}:${original.line},${original.column}]`;\n        }\n      }\n    }\n\n    if (warningsFilter && !warningsFilter(warning, source)) {\n      return null;\n    }\n\n    return `Terser Plugin: ${warningMessage}${locationMessage}`;\n  }\n\n  apply(compiler) {\n    const buildModuleFn = moduleArg => {\n      // to get detailed location info about errors\n      moduleArg.useSourceMap = true;\n    };\n\n    const optimizeFn = (compilation, chunks, callback) => {\n      const taskRunner = new _TaskRunner.default({\n        cache: this.options.cache,\n        parallel: this.options.parallel\n      });\n      const processedAssets = new WeakSet();\n      const tasks = [];\n      const {\n        chunkFilter\n      } = this.options;\n      Array.from(chunks).filter(chunk => chunkFilter && chunkFilter(chunk)).reduce((acc, chunk) => acc.concat(chunk.files || []), []).concat(compilation.additionalChunkAssets || []).filter(_ModuleFilenameHelpers.default.matchObject.bind(null, this.options)).forEach(file => {\n        let inputSourceMap;\n        const asset = compilation.assets[file];\n\n        if (processedAssets.has(asset)) {\n          return;\n        }\n\n        try {\n          let input;\n\n          if (this.options.sourceMap && asset.sourceAndMap) {\n            const {\n              source,\n              map\n            } = asset.sourceAndMap();\n            input = source;\n\n            if (TerserPlugin.isSourceMap(map)) {\n              inputSourceMap = map;\n            } else {\n              inputSourceMap = map;\n              compilation.warnings.push(new Error(`${file} contains invalid source map`));\n            }\n          } else {\n            input = asset.source();\n            inputSourceMap = null;\n          } // Handling comment extraction\n\n\n          let commentsFile = false;\n\n          if (this.options.extractComments) {\n            commentsFile = this.options.extractComments.filename || `${file}.LICENSE`;\n\n            if (typeof commentsFile === 'function') {\n              commentsFile = commentsFile(file);\n            }\n          }\n\n          const task = {\n            file,\n            input,\n            inputSourceMap,\n            commentsFile,\n            extractComments: this.options.extractComments,\n            terserOptions: this.options.terserOptions,\n            minify: this.options.minify\n          };\n\n          if (this.options.cache) {\n            const defaultCacheKeys = {\n              terser: _package.default.version,\n              node_version: process.version,\n              // eslint-disable-next-line global-require\n              'terser-webpack-plugin': require('../package.json').version,\n              'terser-webpack-plugin-options': this.options,\n              hash: _crypto.default.createHash('md4').update(input).digest('hex')\n            };\n            task.cacheKeys = this.options.cacheKeys(defaultCacheKeys, file);\n          }\n\n          tasks.push(task);\n        } catch (error) {\n          compilation.errors.push(TerserPlugin.buildError(error, file, TerserPlugin.buildSourceMap(inputSourceMap), new _RequestShortener.default(compiler.context)));\n        }\n      });\n      taskRunner.run(tasks, (tasksError, results) => {\n        if (tasksError) {\n          compilation.errors.push(tasksError);\n          return;\n        }\n\n        results.forEach((data, index) => {\n          const {\n            file,\n            input,\n            inputSourceMap,\n            commentsFile\n          } = tasks[index];\n          const {\n            error,\n            map,\n            code,\n            warnings\n          } = data;\n          let {\n            extractedComments\n          } = data;\n          let sourceMap = null;\n\n          if (error || warnings && warnings.length > 0) {\n            sourceMap = TerserPlugin.buildSourceMap(inputSourceMap);\n          } // Handling results\n          // Error case: add errors, and go to next file\n\n\n          if (error) {\n            compilation.errors.push(TerserPlugin.buildError(error, file, sourceMap, new _RequestShortener.default(compiler.context)));\n            return;\n          }\n\n          let outputSource;\n\n          if (map) {\n            outputSource = new _webpackSources.SourceMapSource(code, file, JSON.parse(map), input, inputSourceMap, true);\n          } else {\n            outputSource = new _webpackSources.RawSource(code);\n          } // Write extracted comments to commentsFile\n\n\n          if (commentsFile && extractedComments && extractedComments.length > 0) {\n            if (commentsFile in compilation.assets) {\n              const commentsFileSource = compilation.assets[commentsFile].source();\n              extractedComments = extractedComments.filter(comment => !commentsFileSource.includes(comment));\n            }\n\n            if (extractedComments.length > 0) {\n              // Add a banner to the original file\n              if (this.options.extractComments.banner !== false) {\n                let banner = this.options.extractComments.banner || `For license information please see ${_path.default.posix.basename(commentsFile)}`;\n\n                if (typeof banner === 'function') {\n                  banner = banner(commentsFile);\n                }\n\n                if (banner) {\n                  outputSource = new _webpackSources.ConcatSource(`/*! ${banner} */\\n`, outputSource);\n                }\n              }\n\n              const commentsSource = new _webpackSources.RawSource(`${extractedComments.join('\\n\\n')}\\n`);\n\n              if (commentsFile in compilation.assets) {\n                // commentsFile already exists, append new comments...\n                if (compilation.assets[commentsFile] instanceof _webpackSources.ConcatSource) {\n                  compilation.assets[commentsFile].add('\\n');\n                  compilation.assets[commentsFile].add(commentsSource);\n                } else {\n                  compilation.assets[commentsFile] = new _webpackSources.ConcatSource(compilation.assets[commentsFile], '\\n', commentsSource);\n                }\n              } else {\n                compilation.assets[commentsFile] = commentsSource;\n              }\n            }\n          } // Updating assets\n\n\n          processedAssets.add(compilation.assets[file] = outputSource); // Handling warnings\n\n          if (warnings && warnings.length > 0) {\n            warnings.forEach(warning => {\n              const builtWarning = TerserPlugin.buildWarning(warning, file, sourceMap, new _RequestShortener.default(compiler.context), this.options.warningsFilter);\n\n              if (builtWarning) {\n                compilation.warnings.push(builtWarning);\n              }\n            });\n          }\n        });\n        taskRunner.exit();\n        callback();\n      });\n    };\n\n    const plugin = {\n      name: this.constructor.name\n    };\n    compiler.hooks.compilation.tap(plugin, compilation => {\n      if (this.options.sourceMap) {\n        compilation.hooks.buildModule.tap(plugin, buildModuleFn);\n      }\n\n      const {\n        mainTemplate,\n        chunkTemplate\n      } = compilation; // Regenerate `contenthash` for minified assets\n\n      for (const template of [mainTemplate, chunkTemplate]) {\n        template.hooks.hashForChunk.tap(plugin, hash => {\n          const data = (0, _serializeJavascript.default)({\n            terser: _package.default.version,\n            terserOptions: this.options.terserOptions\n          });\n          hash.update('TerserPlugin');\n          hash.update(data);\n        });\n      }\n\n      compilation.hooks.optimizeChunkAssets.tapAsync(plugin, optimizeFn.bind(this, compilation));\n    });\n  }\n\n}\n\nvar _default = TerserPlugin;\nexports.default = _default;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/node_modules/terser-webpack-plugin/dist/index.js"],"names":["Object","defineProperty","exports","value","default","_crypto","_interopRequireDefault","require","_path","_sourceMap","_webpackSources","_RequestShortener","_ModuleFilenameHelpers","_schemaUtils","_serializeJavascript","_package","_options","_TaskRunner","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","warningRegex","TerserPlugin","constructor","options","minify","terserOptions","test","chunkFilter","warningsFilter","extractComments","sourceMap","cache","cacheKeys","defaultCacheKeys","parallel","include","exclude","output","comments","isSourceMap","input","Boolean","version","sources","Array","isArray","mappings","buildSourceMap","inputSourceMap","SourceMapConsumer","buildError","err","file","requestShortener","line","original","originalPositionFor","column","col","Error","message","shorten","stack","buildWarning","warning","warningMessage","locationMessage","match","exec","replace","compiler","buildModuleFn","moduleArg","useSourceMap","optimizeFn","compilation","chunks","callback","taskRunner","processedAssets","WeakSet","tasks","from","chunk","reduce","acc","concat","files","additionalChunkAssets","matchObject","bind","asset","assets","has","sourceAndMap","map","warnings","commentsFile","filename","task","terser","node_version","process","hash","createHash","update","digest","error","errors","context","run","tasksError","results","data","index","code","extractedComments","outputSource","SourceMapSource","JSON","parse","RawSource","commentsFileSource","comment","includes","banner","posix","basename","ConcatSource","commentsSource","join","add","builtWarning","exit","plugin","name","hooks","tap","buildModule","mainTemplate","chunkTemplate","template","hashForChunk","optimizeChunkAssets","tapAsync","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _sourceMap = require(\"source-map\");\n\nvar _webpackSources = require(\"webpack-sources\");\n\nvar _RequestShortener = _interopRequireDefault(require(\"webpack/lib/RequestShortener\"));\n\nvar _ModuleFilenameHelpers = _interopRequireDefault(require(\"webpack/lib/ModuleFilenameHelpers\"));\n\nvar _schemaUtils = _interopRequireDefault(require(\"schema-utils\"));\n\nvar _serializeJavascript = _interopRequireDefault(require(\"serialize-javascript\"));\n\nvar _package = _interopRequireDefault(require(\"terser/package.json\"));\n\nvar _options = _interopRequireDefault(require(\"./options.json\"));\n\nvar _TaskRunner = _interopRequireDefault(require(\"./TaskRunner\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst warningRegex = /\\[.+:([0-9]+),([0-9]+)\\]/;\n\nclass TerserPlugin {\n  constructor(options = {}) {\n    (0, _schemaUtils.default)(_options.default, options, 'Terser Plugin');\n    const {\n      minify,\n      terserOptions = {},\n      test = /\\.m?js(\\?.*)?$/i,\n      chunkFilter = () => true,\n      warningsFilter = () => true,\n      extractComments = false,\n      sourceMap = false,\n      cache = false,\n      cacheKeys = defaultCacheKeys => defaultCacheKeys,\n      parallel = false,\n      include,\n      exclude\n    } = options;\n    this.options = {\n      test,\n      chunkFilter,\n      warningsFilter,\n      extractComments,\n      sourceMap,\n      cache,\n      cacheKeys,\n      parallel,\n      include,\n      exclude,\n      minify,\n      terserOptions: _objectSpread({\n        output: {\n          comments: extractComments ? false : /^\\**!|@preserve|@license|@cc_on/i\n        }\n      }, terserOptions)\n    };\n  }\n\n  static isSourceMap(input) {\n    // All required options for `new SourceMapConsumer(...options)`\n    // https://github.com/mozilla/source-map#new-sourcemapconsumerrawsourcemap\n    return Boolean(input && input.version && input.sources && Array.isArray(input.sources) && typeof input.mappings === 'string');\n  }\n\n  static buildSourceMap(inputSourceMap) {\n    if (!inputSourceMap || !TerserPlugin.isSourceMap(inputSourceMap)) {\n      return null;\n    }\n\n    return new _sourceMap.SourceMapConsumer(inputSourceMap);\n  }\n\n  static buildError(err, file, sourceMap, requestShortener) {\n    // Handling error which should have line, col, filename and message\n    if (err.line) {\n      const original = sourceMap && sourceMap.originalPositionFor({\n        line: err.line,\n        column: err.col\n      });\n\n      if (original && original.source && requestShortener) {\n        return new Error(`${file} from Terser\\n${err.message} [${requestShortener.shorten(original.source)}:${original.line},${original.column}][${file}:${err.line},${err.col}]`);\n      }\n\n      return new Error(`${file} from Terser\\n${err.message} [${file}:${err.line},${err.col}]`);\n    } else if (err.stack) {\n      return new Error(`${file} from Terser\\n${err.stack}`);\n    }\n\n    return new Error(`${file} from Terser\\n${err.message}`);\n  }\n\n  static buildWarning(warning, file, sourceMap, requestShortener, warningsFilter) {\n    let warningMessage = warning;\n    let locationMessage = '';\n    let source = null;\n\n    if (sourceMap) {\n      const match = warningRegex.exec(warning);\n\n      if (match) {\n        const line = +match[1];\n        const column = +match[2];\n        const original = sourceMap.originalPositionFor({\n          line,\n          column\n        });\n\n        if (original && original.source && original.source !== file && requestShortener) {\n          ({\n            source\n          } = original);\n          warningMessage = `${warningMessage.replace(warningRegex, '')}`;\n          locationMessage = `[${requestShortener.shorten(original.source)}:${original.line},${original.column}]`;\n        }\n      }\n    }\n\n    if (warningsFilter && !warningsFilter(warning, source)) {\n      return null;\n    }\n\n    return `Terser Plugin: ${warningMessage}${locationMessage}`;\n  }\n\n  apply(compiler) {\n    const buildModuleFn = moduleArg => {\n      // to get detailed location info about errors\n      moduleArg.useSourceMap = true;\n    };\n\n    const optimizeFn = (compilation, chunks, callback) => {\n      const taskRunner = new _TaskRunner.default({\n        cache: this.options.cache,\n        parallel: this.options.parallel\n      });\n      const processedAssets = new WeakSet();\n      const tasks = [];\n      const {\n        chunkFilter\n      } = this.options;\n      Array.from(chunks).filter(chunk => chunkFilter && chunkFilter(chunk)).reduce((acc, chunk) => acc.concat(chunk.files || []), []).concat(compilation.additionalChunkAssets || []).filter(_ModuleFilenameHelpers.default.matchObject.bind(null, this.options)).forEach(file => {\n        let inputSourceMap;\n        const asset = compilation.assets[file];\n\n        if (processedAssets.has(asset)) {\n          return;\n        }\n\n        try {\n          let input;\n\n          if (this.options.sourceMap && asset.sourceAndMap) {\n            const {\n              source,\n              map\n            } = asset.sourceAndMap();\n            input = source;\n\n            if (TerserPlugin.isSourceMap(map)) {\n              inputSourceMap = map;\n            } else {\n              inputSourceMap = map;\n              compilation.warnings.push(new Error(`${file} contains invalid source map`));\n            }\n          } else {\n            input = asset.source();\n            inputSourceMap = null;\n          } // Handling comment extraction\n\n\n          let commentsFile = false;\n\n          if (this.options.extractComments) {\n            commentsFile = this.options.extractComments.filename || `${file}.LICENSE`;\n\n            if (typeof commentsFile === 'function') {\n              commentsFile = commentsFile(file);\n            }\n          }\n\n          const task = {\n            file,\n            input,\n            inputSourceMap,\n            commentsFile,\n            extractComments: this.options.extractComments,\n            terserOptions: this.options.terserOptions,\n            minify: this.options.minify\n          };\n\n          if (this.options.cache) {\n            const defaultCacheKeys = {\n              terser: _package.default.version,\n              node_version: process.version,\n              // eslint-disable-next-line global-require\n              'terser-webpack-plugin': require('../package.json').version,\n              'terser-webpack-plugin-options': this.options,\n              hash: _crypto.default.createHash('md4').update(input).digest('hex')\n            };\n            task.cacheKeys = this.options.cacheKeys(defaultCacheKeys, file);\n          }\n\n          tasks.push(task);\n        } catch (error) {\n          compilation.errors.push(TerserPlugin.buildError(error, file, TerserPlugin.buildSourceMap(inputSourceMap), new _RequestShortener.default(compiler.context)));\n        }\n      });\n      taskRunner.run(tasks, (tasksError, results) => {\n        if (tasksError) {\n          compilation.errors.push(tasksError);\n          return;\n        }\n\n        results.forEach((data, index) => {\n          const {\n            file,\n            input,\n            inputSourceMap,\n            commentsFile\n          } = tasks[index];\n          const {\n            error,\n            map,\n            code,\n            warnings\n          } = data;\n          let {\n            extractedComments\n          } = data;\n          let sourceMap = null;\n\n          if (error || warnings && warnings.length > 0) {\n            sourceMap = TerserPlugin.buildSourceMap(inputSourceMap);\n          } // Handling results\n          // Error case: add errors, and go to next file\n\n\n          if (error) {\n            compilation.errors.push(TerserPlugin.buildError(error, file, sourceMap, new _RequestShortener.default(compiler.context)));\n            return;\n          }\n\n          let outputSource;\n\n          if (map) {\n            outputSource = new _webpackSources.SourceMapSource(code, file, JSON.parse(map), input, inputSourceMap, true);\n          } else {\n            outputSource = new _webpackSources.RawSource(code);\n          } // Write extracted comments to commentsFile\n\n\n          if (commentsFile && extractedComments && extractedComments.length > 0) {\n            if (commentsFile in compilation.assets) {\n              const commentsFileSource = compilation.assets[commentsFile].source();\n              extractedComments = extractedComments.filter(comment => !commentsFileSource.includes(comment));\n            }\n\n            if (extractedComments.length > 0) {\n              // Add a banner to the original file\n              if (this.options.extractComments.banner !== false) {\n                let banner = this.options.extractComments.banner || `For license information please see ${_path.default.posix.basename(commentsFile)}`;\n\n                if (typeof banner === 'function') {\n                  banner = banner(commentsFile);\n                }\n\n                if (banner) {\n                  outputSource = new _webpackSources.ConcatSource(`/*! ${banner} */\\n`, outputSource);\n                }\n              }\n\n              const commentsSource = new _webpackSources.RawSource(`${extractedComments.join('\\n\\n')}\\n`);\n\n              if (commentsFile in compilation.assets) {\n                // commentsFile already exists, append new comments...\n                if (compilation.assets[commentsFile] instanceof _webpackSources.ConcatSource) {\n                  compilation.assets[commentsFile].add('\\n');\n                  compilation.assets[commentsFile].add(commentsSource);\n                } else {\n                  compilation.assets[commentsFile] = new _webpackSources.ConcatSource(compilation.assets[commentsFile], '\\n', commentsSource);\n                }\n              } else {\n                compilation.assets[commentsFile] = commentsSource;\n              }\n            }\n          } // Updating assets\n\n\n          processedAssets.add(compilation.assets[file] = outputSource); // Handling warnings\n\n          if (warnings && warnings.length > 0) {\n            warnings.forEach(warning => {\n              const builtWarning = TerserPlugin.buildWarning(warning, file, sourceMap, new _RequestShortener.default(compiler.context), this.options.warningsFilter);\n\n              if (builtWarning) {\n                compilation.warnings.push(builtWarning);\n              }\n            });\n          }\n        });\n        taskRunner.exit();\n        callback();\n      });\n    };\n\n    const plugin = {\n      name: this.constructor.name\n    };\n    compiler.hooks.compilation.tap(plugin, compilation => {\n      if (this.options.sourceMap) {\n        compilation.hooks.buildModule.tap(plugin, buildModuleFn);\n      }\n\n      const {\n        mainTemplate,\n        chunkTemplate\n      } = compilation; // Regenerate `contenthash` for minified assets\n\n      for (const template of [mainTemplate, chunkTemplate]) {\n        template.hooks.hashForChunk.tap(plugin, hash => {\n          const data = (0, _serializeJavascript.default)({\n            terser: _package.default.version,\n            terserOptions: this.options.terserOptions\n          });\n          hash.update('TerserPlugin');\n          hash.update(data);\n        });\n      }\n\n      compilation.hooks.optimizeChunkAssets.tapAsync(plugin, optimizeFn.bind(this, compilation));\n    });\n  }\n\n}\n\nvar _default = TerserPlugin;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}