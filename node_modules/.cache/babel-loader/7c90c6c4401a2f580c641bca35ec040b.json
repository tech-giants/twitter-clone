{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\n\nconst NORMALIZE_SLASH_DIRECTION_REGEXP = /\\\\/g;\nconst PATH_CHARS_REGEXP = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\nconst SEPARATOR_REGEXP = /[/\\\\]$/;\nconst FRONT_OR_BACK_BANG_REGEXP = /^!|!$/g;\nconst INDEX_JS_REGEXP = /\\/index.js(!|\\?|\\(query\\))/g;\nconst MATCH_RESOURCE_REGEXP = /!=!/;\n\nconst normalizeBackSlashDirection = request => {\n  return request.replace(NORMALIZE_SLASH_DIRECTION_REGEXP, \"/\");\n};\n\nconst createRegExpForPath = path => {\n  const regexpTypePartial = path.replace(PATH_CHARS_REGEXP, \"\\\\$&\");\n  return new RegExp(`(^|!)${regexpTypePartial}`, \"g\");\n};\n\nclass RequestShortener {\n  constructor(directory) {\n    directory = normalizeBackSlashDirection(directory);\n\n    if (SEPARATOR_REGEXP.test(directory)) {\n      directory = directory.substr(0, directory.length - 1);\n    }\n\n    if (directory) {\n      this.currentDirectoryRegExp = createRegExpForPath(directory);\n    }\n\n    const dirname = path.dirname(directory);\n    const endsWithSeparator = SEPARATOR_REGEXP.test(dirname);\n    const parentDirectory = endsWithSeparator ? dirname.substr(0, dirname.length - 1) : dirname;\n\n    if (parentDirectory && parentDirectory !== directory) {\n      this.parentDirectoryRegExp = createRegExpForPath(`${parentDirectory}/`);\n    }\n\n    if (__dirname.length >= 2) {\n      const buildins = normalizeBackSlashDirection(path.join(__dirname, \"..\"));\n      const buildinsAsModule = this.currentDirectoryRegExp && this.currentDirectoryRegExp.test(buildins);\n      this.buildinsAsModule = buildinsAsModule;\n      this.buildinsRegExp = createRegExpForPath(buildins);\n    }\n\n    this.cache = new Map();\n  }\n\n  shorten(request) {\n    if (!request) return request;\n    const cacheEntry = this.cache.get(request);\n\n    if (cacheEntry !== undefined) {\n      return cacheEntry;\n    }\n\n    let result = normalizeBackSlashDirection(request);\n\n    if (this.buildinsAsModule && this.buildinsRegExp) {\n      result = result.replace(this.buildinsRegExp, \"!(webpack)\");\n    }\n\n    if (this.currentDirectoryRegExp) {\n      result = result.replace(this.currentDirectoryRegExp, \"!.\");\n    }\n\n    if (this.parentDirectoryRegExp) {\n      result = result.replace(this.parentDirectoryRegExp, \"!../\");\n    }\n\n    if (!this.buildinsAsModule && this.buildinsRegExp) {\n      result = result.replace(this.buildinsRegExp, \"!(webpack)\");\n    }\n\n    result = result.replace(INDEX_JS_REGEXP, \"$1\");\n    result = result.replace(FRONT_OR_BACK_BANG_REGEXP, \"\");\n    result = result.replace(MATCH_RESOURCE_REGEXP, \" = \");\n    this.cache.set(request, result);\n    return result;\n  }\n\n}\n\nmodule.exports = RequestShortener;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/RequestShortener.js"],"names":["path","require","NORMALIZE_SLASH_DIRECTION_REGEXP","PATH_CHARS_REGEXP","SEPARATOR_REGEXP","FRONT_OR_BACK_BANG_REGEXP","INDEX_JS_REGEXP","MATCH_RESOURCE_REGEXP","normalizeBackSlashDirection","request","replace","createRegExpForPath","regexpTypePartial","RegExp","RequestShortener","constructor","directory","test","substr","length","currentDirectoryRegExp","dirname","endsWithSeparator","parentDirectory","parentDirectoryRegExp","__dirname","buildins","join","buildinsAsModule","buildinsRegExp","cache","Map","shorten","cacheEntry","get","undefined","result","set","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst path = require(\"path\");\nconst NORMALIZE_SLASH_DIRECTION_REGEXP = /\\\\/g;\nconst PATH_CHARS_REGEXP = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\nconst SEPARATOR_REGEXP = /[/\\\\]$/;\nconst FRONT_OR_BACK_BANG_REGEXP = /^!|!$/g;\nconst INDEX_JS_REGEXP = /\\/index.js(!|\\?|\\(query\\))/g;\nconst MATCH_RESOURCE_REGEXP = /!=!/;\n\nconst normalizeBackSlashDirection = request => {\n\treturn request.replace(NORMALIZE_SLASH_DIRECTION_REGEXP, \"/\");\n};\n\nconst createRegExpForPath = path => {\n\tconst regexpTypePartial = path.replace(PATH_CHARS_REGEXP, \"\\\\$&\");\n\treturn new RegExp(`(^|!)${regexpTypePartial}`, \"g\");\n};\n\nclass RequestShortener {\n\tconstructor(directory) {\n\t\tdirectory = normalizeBackSlashDirection(directory);\n\t\tif (SEPARATOR_REGEXP.test(directory)) {\n\t\t\tdirectory = directory.substr(0, directory.length - 1);\n\t\t}\n\n\t\tif (directory) {\n\t\t\tthis.currentDirectoryRegExp = createRegExpForPath(directory);\n\t\t}\n\n\t\tconst dirname = path.dirname(directory);\n\t\tconst endsWithSeparator = SEPARATOR_REGEXP.test(dirname);\n\t\tconst parentDirectory = endsWithSeparator\n\t\t\t? dirname.substr(0, dirname.length - 1)\n\t\t\t: dirname;\n\t\tif (parentDirectory && parentDirectory !== directory) {\n\t\t\tthis.parentDirectoryRegExp = createRegExpForPath(`${parentDirectory}/`);\n\t\t}\n\n\t\tif (__dirname.length >= 2) {\n\t\t\tconst buildins = normalizeBackSlashDirection(path.join(__dirname, \"..\"));\n\t\t\tconst buildinsAsModule =\n\t\t\t\tthis.currentDirectoryRegExp &&\n\t\t\t\tthis.currentDirectoryRegExp.test(buildins);\n\t\t\tthis.buildinsAsModule = buildinsAsModule;\n\t\t\tthis.buildinsRegExp = createRegExpForPath(buildins);\n\t\t}\n\n\t\tthis.cache = new Map();\n\t}\n\n\tshorten(request) {\n\t\tif (!request) return request;\n\t\tconst cacheEntry = this.cache.get(request);\n\t\tif (cacheEntry !== undefined) {\n\t\t\treturn cacheEntry;\n\t\t}\n\t\tlet result = normalizeBackSlashDirection(request);\n\t\tif (this.buildinsAsModule && this.buildinsRegExp) {\n\t\t\tresult = result.replace(this.buildinsRegExp, \"!(webpack)\");\n\t\t}\n\t\tif (this.currentDirectoryRegExp) {\n\t\t\tresult = result.replace(this.currentDirectoryRegExp, \"!.\");\n\t\t}\n\t\tif (this.parentDirectoryRegExp) {\n\t\t\tresult = result.replace(this.parentDirectoryRegExp, \"!../\");\n\t\t}\n\t\tif (!this.buildinsAsModule && this.buildinsRegExp) {\n\t\t\tresult = result.replace(this.buildinsRegExp, \"!(webpack)\");\n\t\t}\n\t\tresult = result.replace(INDEX_JS_REGEXP, \"$1\");\n\t\tresult = result.replace(FRONT_OR_BACK_BANG_REGEXP, \"\");\n\t\tresult = result.replace(MATCH_RESOURCE_REGEXP, \" = \");\n\t\tthis.cache.set(request, result);\n\t\treturn result;\n\t}\n}\n\nmodule.exports = RequestShortener;\n"]},"metadata":{},"sourceType":"script"}