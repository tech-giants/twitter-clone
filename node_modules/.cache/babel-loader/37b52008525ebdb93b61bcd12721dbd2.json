{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst CodeNode = require(\"./CodeNode\");\n\nconst SourceNode = require(\"./SourceNode\");\n\nconst MappingsContext = require(\"./MappingsContext\");\n\nconst getNumberOfLines = require(\"./helpers\").getNumberOfLines;\n\nclass SourceListMap {\n  constructor(generatedCode, source, originalSource) {\n    if (Array.isArray(generatedCode)) {\n      this.children = generatedCode;\n    } else {\n      this.children = [];\n      if (generatedCode || source) this.add(generatedCode, source, originalSource);\n    }\n  }\n\n  add(generatedCode, source, originalSource) {\n    if (typeof generatedCode === \"string\") {\n      if (source) {\n        this.children.push(new SourceNode(generatedCode, source, originalSource));\n      } else if (this.children.length > 0 && this.children[this.children.length - 1] instanceof CodeNode) {\n        this.children[this.children.length - 1].addGeneratedCode(generatedCode);\n      } else {\n        this.children.push(new CodeNode(generatedCode));\n      }\n    } else if (generatedCode.getMappings && generatedCode.getGeneratedCode) {\n      this.children.push(generatedCode);\n    } else if (generatedCode.children) {\n      generatedCode.children.forEach(function (sln) {\n        this.children.push(sln);\n      }, this);\n    } else {\n      throw new Error(\"Invalid arguments to SourceListMap.protfotype.add: Expected string, Node or SourceListMap\");\n    }\n  }\n\n  preprend(generatedCode, source, originalSource) {\n    if (typeof generatedCode === \"string\") {\n      if (source) {\n        this.children.unshift(new SourceNode(generatedCode, source, originalSource));\n      } else if (this.children.length > 0 && this.children[this.children.length - 1].preprendGeneratedCode) {\n        this.children[this.children.length - 1].preprendGeneratedCode(generatedCode);\n      } else {\n        this.children.unshift(new CodeNode(generatedCode));\n      }\n    } else if (generatedCode.getMappings && generatedCode.getGeneratedCode) {\n      this.children.unshift(generatedCode);\n    } else if (generatedCode.children) {\n      generatedCode.children.slice().reverse().forEach(function (sln) {\n        this.children.unshift(sln);\n      }, this);\n    } else {\n      throw new Error(\"Invalid arguments to SourceListMap.protfotype.prerend: Expected string, Node or SourceListMap\");\n    }\n  }\n\n  mapGeneratedCode(fn) {\n    const normalizedNodes = [];\n    this.children.forEach(function (sln) {\n      sln.getNormalizedNodes().forEach(function (newNode) {\n        normalizedNodes.push(newNode);\n      });\n    });\n    const optimizedNodes = [];\n    normalizedNodes.forEach(function (sln) {\n      sln = sln.mapGeneratedCode(fn);\n\n      if (optimizedNodes.length === 0) {\n        optimizedNodes.push(sln);\n      } else {\n        const last = optimizedNodes[optimizedNodes.length - 1];\n        const mergedNode = last.merge(sln);\n\n        if (mergedNode) {\n          optimizedNodes[optimizedNodes.length - 1] = mergedNode;\n        } else {\n          optimizedNodes.push(sln);\n        }\n      }\n    });\n    return new SourceListMap(optimizedNodes);\n  }\n\n  toString() {\n    return this.children.map(function (sln) {\n      return sln.getGeneratedCode();\n    }).join(\"\");\n  }\n\n  toStringWithSourceMap(options) {\n    const mappingsContext = new MappingsContext();\n    const source = this.children.map(function (sln) {\n      return sln.getGeneratedCode();\n    }).join(\"\");\n    const mappings = this.children.map(function (sln) {\n      return sln.getMappings(mappingsContext);\n    }).join(\"\");\n    const arrays = mappingsContext.getArrays();\n    return {\n      source,\n      map: {\n        version: 3,\n        file: options && options.file,\n        sources: arrays.sources,\n        sourcesContent: mappingsContext.hasSourceContent ? arrays.sourcesContent : undefined,\n        mappings: mappings\n      }\n    };\n  }\n\n}\n\nmodule.exports = SourceListMap;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/source-list-map/lib/SourceListMap.js"],"names":["CodeNode","require","SourceNode","MappingsContext","getNumberOfLines","SourceListMap","constructor","generatedCode","source","originalSource","Array","isArray","children","add","push","length","addGeneratedCode","getMappings","getGeneratedCode","forEach","sln","Error","preprend","unshift","preprendGeneratedCode","slice","reverse","mapGeneratedCode","fn","normalizedNodes","getNormalizedNodes","newNode","optimizedNodes","last","mergedNode","merge","toString","map","join","toStringWithSourceMap","options","mappingsContext","mappings","arrays","getArrays","version","file","sources","sourcesContent","hasSourceContent","undefined","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst CodeNode = require(\"./CodeNode\");\nconst SourceNode = require(\"./SourceNode\");\nconst MappingsContext = require(\"./MappingsContext\");\nconst getNumberOfLines = require(\"./helpers\").getNumberOfLines;\n\nclass SourceListMap {\n\n\tconstructor(generatedCode, source, originalSource) {\n\t\tif(Array.isArray(generatedCode)) {\n\t\t\tthis.children = generatedCode;\n\t\t} else {\n\t\t\tthis.children = [];\n\t\t\tif(generatedCode || source)\n\t\t\t\tthis.add(generatedCode, source, originalSource);\n\t\t}\n\t}\n\n\tadd(generatedCode, source, originalSource) {\n\t\tif(typeof generatedCode === \"string\") {\n\t\t\tif(source) {\n\t\t\t\tthis.children.push(new SourceNode(generatedCode, source, originalSource));\n\t\t\t} else if(this.children.length > 0 && this.children[this.children.length - 1] instanceof CodeNode) {\n\t\t\t\tthis.children[this.children.length - 1].addGeneratedCode(generatedCode);\n\t\t\t} else {\n\t\t\t\tthis.children.push(new CodeNode(generatedCode));\n\t\t\t}\n\t\t} else if(generatedCode.getMappings && generatedCode.getGeneratedCode) {\n\t\t\tthis.children.push(generatedCode);\n\t\t} else if(generatedCode.children) {\n\t\t\tgeneratedCode.children.forEach(function(sln) {\n\t\t\t\tthis.children.push(sln);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tthrow new Error(\"Invalid arguments to SourceListMap.protfotype.add: Expected string, Node or SourceListMap\");\n\t\t}\n\t};\n\n\tpreprend(generatedCode, source, originalSource) {\n\t\tif(typeof generatedCode === \"string\") {\n\t\t\tif(source) {\n\t\t\t\tthis.children.unshift(new SourceNode(generatedCode, source, originalSource));\n\t\t\t} else if(this.children.length > 0 && this.children[this.children.length - 1].preprendGeneratedCode) {\n\t\t\t\tthis.children[this.children.length - 1].preprendGeneratedCode(generatedCode);\n\t\t\t} else {\n\t\t\t\tthis.children.unshift(new CodeNode(generatedCode));\n\t\t\t}\n\t\t} else if(generatedCode.getMappings && generatedCode.getGeneratedCode) {\n\t\t\tthis.children.unshift(generatedCode);\n\t\t} else if(generatedCode.children) {\n\t\t\tgeneratedCode.children.slice().reverse().forEach(function(sln) {\n\t\t\t\tthis.children.unshift(sln);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tthrow new Error(\"Invalid arguments to SourceListMap.protfotype.prerend: Expected string, Node or SourceListMap\");\n\t\t}\n\t};\n\n\tmapGeneratedCode(fn) {\n\t\tconst normalizedNodes = [];\n\t\tthis.children.forEach(function(sln) {\n\t\t\tsln.getNormalizedNodes().forEach(function(newNode) {\n\t\t\t\tnormalizedNodes.push(newNode);\n\t\t\t});\n\t\t});\n\t\tconst optimizedNodes = [];\n\t\tnormalizedNodes.forEach(function(sln) {\n\t\t\tsln = sln.mapGeneratedCode(fn);\n\t\t\tif(optimizedNodes.length === 0) {\n\t\t\t\toptimizedNodes.push(sln);\n\t\t\t} else {\n\t\t\t\tconst last = optimizedNodes[optimizedNodes.length - 1];\n\t\t\t\tconst mergedNode = last.merge(sln);\n\t\t\t\tif(mergedNode) {\n\t\t\t\t\toptimizedNodes[optimizedNodes.length - 1] = mergedNode;\n\t\t\t\t} else {\n\t\t\t\t\toptimizedNodes.push(sln);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn new SourceListMap(optimizedNodes);\n\t};\n\n\ttoString() {\n\t\treturn this.children.map(function(sln) {\n\t\t\treturn sln.getGeneratedCode();\n\t\t}).join(\"\");\n\t};\n\n\ttoStringWithSourceMap(options) {\n\t\tconst mappingsContext = new MappingsContext();\n\t\tconst source = this.children.map(function(sln) {\n\t\t\treturn sln.getGeneratedCode();\n\t\t}).join(\"\");\n\t\tconst mappings = this.children.map(function(sln) {\n\t\t\treturn sln.getMappings(mappingsContext);\n\t\t}).join(\"\");\n\t\tconst arrays = mappingsContext.getArrays();\n\t\treturn {\n\t\t\tsource,\n\t\t\tmap: {\n\t\t\t\tversion: 3,\n\t\t\t\tfile: options && options.file,\n\t\t\t\tsources: arrays.sources,\n\t\t\t\tsourcesContent: mappingsContext.hasSourceContent ? arrays.sourcesContent : undefined,\n\t\t\t\tmappings: mappings\n\t\t\t}\n\t\t};\n\t}\n}\n\nmodule.exports = SourceListMap;\n"]},"metadata":{},"sourceType":"script"}