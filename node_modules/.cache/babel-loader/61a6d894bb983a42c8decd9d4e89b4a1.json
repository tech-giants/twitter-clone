{"ast":null,"code":"'use strict';\n\nvar SCALAR_TYPES = ['number', 'integer', 'string', 'boolean', 'null'];\n\nmodule.exports = function defFunc(ajv) {\n  defFunc.definition = {\n    type: 'array',\n    compile: function (keys, parentSchema, it) {\n      var equal = it.util.equal;\n      var scalar = getScalarKeys(keys, parentSchema);\n      return function (data) {\n        if (data.length > 1) {\n          for (var k = 0; k < keys.length; k++) {\n            var i,\n                key = keys[k];\n\n            if (scalar[k]) {\n              var hash = {};\n\n              for (i = data.length; i--;) {\n                if (!data[i] || typeof data[i] != 'object') continue;\n                var prop = data[i][key];\n                if (prop && typeof prop == 'object') continue;\n                if (typeof prop == 'string') prop = '\"' + prop;\n                if (hash[prop]) return false;\n                hash[prop] = true;\n              }\n            } else {\n              for (i = data.length; i--;) {\n                if (!data[i] || typeof data[i] != 'object') continue;\n\n                for (var j = i; j--;) {\n                  if (data[j] && typeof data[j] == 'object' && equal(data[i][key], data[j][key])) return false;\n                }\n              }\n            }\n          }\n        }\n\n        return true;\n      };\n    },\n    metaSchema: {\n      type: 'array',\n      items: {\n        type: 'string'\n      }\n    }\n  };\n  ajv.addKeyword('uniqueItemProperties', defFunc.definition);\n  return ajv;\n};\n\nfunction getScalarKeys(keys, schema) {\n  return keys.map(function (key) {\n    var properties = schema.items && schema.items.properties;\n    var propType = properties && properties[key] && properties[key].type;\n    return Array.isArray(propType) ? propType.indexOf('object') < 0 && propType.indexOf('array') < 0 : SCALAR_TYPES.indexOf(propType) >= 0;\n  });\n}","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/ajv-keywords/keywords/uniqueItemProperties.js"],"names":["SCALAR_TYPES","module","exports","defFunc","ajv","definition","type","compile","keys","parentSchema","it","equal","util","scalar","getScalarKeys","data","length","k","i","key","hash","prop","j","metaSchema","items","addKeyword","schema","map","properties","propType","Array","isArray","indexOf"],"mappings":"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","sourcesContent":["'use strict';\n\nvar SCALAR_TYPES = ['number', 'integer', 'string', 'boolean', 'null'];\n\nmodule.exports = function defFunc(ajv) {\n  defFunc.definition = {\n    type: 'array',\n    compile: function(keys, parentSchema, it) {\n      var equal = it.util.equal;\n      var scalar = getScalarKeys(keys, parentSchema);\n\n      return function(data) {\n        if (data.length > 1) {\n          for (var k=0; k < keys.length; k++) {\n            var i, key = keys[k];\n            if (scalar[k]) {\n              var hash = {};\n              for (i = data.length; i--;) {\n                if (!data[i] || typeof data[i] != 'object') continue;\n                var prop = data[i][key];\n                if (prop && typeof prop == 'object') continue;\n                if (typeof prop == 'string') prop = '\"' + prop;\n                if (hash[prop]) return false;\n                hash[prop] = true;\n              }\n            } else {\n              for (i = data.length; i--;) {\n                if (!data[i] || typeof data[i] != 'object') continue;\n                for (var j = i; j--;) {\n                  if (data[j] && typeof data[j] == 'object' && equal(data[i][key], data[j][key]))\n                    return false;\n                }\n              }\n            }\n          }\n        }\n        return true;\n      };\n    },\n    metaSchema: {\n      type: 'array',\n      items: {type: 'string'}\n    }\n  };\n\n  ajv.addKeyword('uniqueItemProperties', defFunc.definition);\n  return ajv;\n};\n\n\nfunction getScalarKeys(keys, schema) {\n  return keys.map(function(key) {\n    var properties = schema.items && schema.items.properties;\n    var propType = properties && properties[key] && properties[key].type;\n    return Array.isArray(propType)\n            ? propType.indexOf('object') < 0 && propType.indexOf('array') < 0\n            : SCALAR_TYPES.indexOf(propType) >= 0;\n  });\n}\n"]},"metadata":{},"sourceType":"script"}