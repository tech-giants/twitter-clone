{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst HarmonyCompatibilityDependency = require(\"./HarmonyCompatibilityDependency\");\n\nconst HarmonyInitDependency = require(\"./HarmonyInitDependency\");\n\nconst HarmonyImportSpecifierDependency = require(\"./HarmonyImportSpecifierDependency\");\n\nconst HarmonyImportSideEffectDependency = require(\"./HarmonyImportSideEffectDependency\");\n\nconst HarmonyExportHeaderDependency = require(\"./HarmonyExportHeaderDependency\");\n\nconst HarmonyExportExpressionDependency = require(\"./HarmonyExportExpressionDependency\");\n\nconst HarmonyExportSpecifierDependency = require(\"./HarmonyExportSpecifierDependency\");\n\nconst HarmonyExportImportedSpecifierDependency = require(\"./HarmonyExportImportedSpecifierDependency\");\n\nconst HarmonyAcceptDependency = require(\"./HarmonyAcceptDependency\");\n\nconst HarmonyAcceptImportDependency = require(\"./HarmonyAcceptImportDependency\");\n\nconst NullFactory = require(\"../NullFactory\");\n\nconst HarmonyDetectionParserPlugin = require(\"./HarmonyDetectionParserPlugin\");\n\nconst HarmonyImportDependencyParserPlugin = require(\"./HarmonyImportDependencyParserPlugin\");\n\nconst HarmonyExportDependencyParserPlugin = require(\"./HarmonyExportDependencyParserPlugin\");\n\nconst HarmonyTopLevelThisParserPlugin = require(\"./HarmonyTopLevelThisParserPlugin\");\n\nclass HarmonyModulesPlugin {\n  constructor(options) {\n    this.options = options;\n  }\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"HarmonyModulesPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(HarmonyCompatibilityDependency, new NullFactory());\n      compilation.dependencyTemplates.set(HarmonyCompatibilityDependency, new HarmonyCompatibilityDependency.Template());\n      compilation.dependencyFactories.set(HarmonyInitDependency, new NullFactory());\n      compilation.dependencyTemplates.set(HarmonyInitDependency, new HarmonyInitDependency.Template());\n      compilation.dependencyFactories.set(HarmonyImportSideEffectDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(HarmonyImportSideEffectDependency, new HarmonyImportSideEffectDependency.Template());\n      compilation.dependencyFactories.set(HarmonyImportSpecifierDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(HarmonyImportSpecifierDependency, new HarmonyImportSpecifierDependency.Template());\n      compilation.dependencyFactories.set(HarmonyExportHeaderDependency, new NullFactory());\n      compilation.dependencyTemplates.set(HarmonyExportHeaderDependency, new HarmonyExportHeaderDependency.Template());\n      compilation.dependencyFactories.set(HarmonyExportExpressionDependency, new NullFactory());\n      compilation.dependencyTemplates.set(HarmonyExportExpressionDependency, new HarmonyExportExpressionDependency.Template());\n      compilation.dependencyFactories.set(HarmonyExportSpecifierDependency, new NullFactory());\n      compilation.dependencyTemplates.set(HarmonyExportSpecifierDependency, new HarmonyExportSpecifierDependency.Template());\n      compilation.dependencyFactories.set(HarmonyExportImportedSpecifierDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(HarmonyExportImportedSpecifierDependency, new HarmonyExportImportedSpecifierDependency.Template());\n      compilation.dependencyFactories.set(HarmonyAcceptDependency, new NullFactory());\n      compilation.dependencyTemplates.set(HarmonyAcceptDependency, new HarmonyAcceptDependency.Template());\n      compilation.dependencyFactories.set(HarmonyAcceptImportDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(HarmonyAcceptImportDependency, new HarmonyAcceptImportDependency.Template());\n\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.harmony !== undefined && !parserOptions.harmony) return;\n        new HarmonyDetectionParserPlugin().apply(parser);\n        new HarmonyImportDependencyParserPlugin(this.options).apply(parser);\n        new HarmonyExportDependencyParserPlugin(this.options).apply(parser);\n        new HarmonyTopLevelThisParserPlugin().apply(parser);\n      };\n\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"HarmonyModulesPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/esm\").tap(\"HarmonyModulesPlugin\", handler);\n    });\n  }\n\n}\n\nmodule.exports = HarmonyModulesPlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/dependencies/HarmonyModulesPlugin.js"],"names":["HarmonyCompatibilityDependency","require","HarmonyInitDependency","HarmonyImportSpecifierDependency","HarmonyImportSideEffectDependency","HarmonyExportHeaderDependency","HarmonyExportExpressionDependency","HarmonyExportSpecifierDependency","HarmonyExportImportedSpecifierDependency","HarmonyAcceptDependency","HarmonyAcceptImportDependency","NullFactory","HarmonyDetectionParserPlugin","HarmonyImportDependencyParserPlugin","HarmonyExportDependencyParserPlugin","HarmonyTopLevelThisParserPlugin","HarmonyModulesPlugin","constructor","options","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencyTemplates","Template","handler","parser","parserOptions","harmony","undefined","for","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\nconst HarmonyCompatibilityDependency = require(\"./HarmonyCompatibilityDependency\");\nconst HarmonyInitDependency = require(\"./HarmonyInitDependency\");\nconst HarmonyImportSpecifierDependency = require(\"./HarmonyImportSpecifierDependency\");\nconst HarmonyImportSideEffectDependency = require(\"./HarmonyImportSideEffectDependency\");\nconst HarmonyExportHeaderDependency = require(\"./HarmonyExportHeaderDependency\");\nconst HarmonyExportExpressionDependency = require(\"./HarmonyExportExpressionDependency\");\nconst HarmonyExportSpecifierDependency = require(\"./HarmonyExportSpecifierDependency\");\nconst HarmonyExportImportedSpecifierDependency = require(\"./HarmonyExportImportedSpecifierDependency\");\nconst HarmonyAcceptDependency = require(\"./HarmonyAcceptDependency\");\nconst HarmonyAcceptImportDependency = require(\"./HarmonyAcceptImportDependency\");\n\nconst NullFactory = require(\"../NullFactory\");\n\nconst HarmonyDetectionParserPlugin = require(\"./HarmonyDetectionParserPlugin\");\nconst HarmonyImportDependencyParserPlugin = require(\"./HarmonyImportDependencyParserPlugin\");\nconst HarmonyExportDependencyParserPlugin = require(\"./HarmonyExportDependencyParserPlugin\");\nconst HarmonyTopLevelThisParserPlugin = require(\"./HarmonyTopLevelThisParserPlugin\");\n\nclass HarmonyModulesPlugin {\n\tconstructor(options) {\n\t\tthis.options = options;\n\t}\n\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"HarmonyModulesPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyCompatibilityDependency,\n\t\t\t\t\tnew NullFactory()\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyCompatibilityDependency,\n\t\t\t\t\tnew HarmonyCompatibilityDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyInitDependency,\n\t\t\t\t\tnew NullFactory()\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyInitDependency,\n\t\t\t\t\tnew HarmonyInitDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyImportSideEffectDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyImportSideEffectDependency,\n\t\t\t\t\tnew HarmonyImportSideEffectDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyImportSpecifierDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyImportSpecifierDependency,\n\t\t\t\t\tnew HarmonyImportSpecifierDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyExportHeaderDependency,\n\t\t\t\t\tnew NullFactory()\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyExportHeaderDependency,\n\t\t\t\t\tnew HarmonyExportHeaderDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyExportExpressionDependency,\n\t\t\t\t\tnew NullFactory()\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyExportExpressionDependency,\n\t\t\t\t\tnew HarmonyExportExpressionDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyExportSpecifierDependency,\n\t\t\t\t\tnew NullFactory()\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyExportSpecifierDependency,\n\t\t\t\t\tnew HarmonyExportSpecifierDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyExportImportedSpecifierDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyExportImportedSpecifierDependency,\n\t\t\t\t\tnew HarmonyExportImportedSpecifierDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyAcceptDependency,\n\t\t\t\t\tnew NullFactory()\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyAcceptDependency,\n\t\t\t\t\tnew HarmonyAcceptDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tHarmonyAcceptImportDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tHarmonyAcceptImportDependency,\n\t\t\t\t\tnew HarmonyAcceptImportDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tif (parserOptions.harmony !== undefined && !parserOptions.harmony)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tnew HarmonyDetectionParserPlugin().apply(parser);\n\t\t\t\t\tnew HarmonyImportDependencyParserPlugin(this.options).apply(parser);\n\t\t\t\t\tnew HarmonyExportDependencyParserPlugin(this.options).apply(parser);\n\t\t\t\t\tnew HarmonyTopLevelThisParserPlugin().apply(parser);\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"HarmonyModulesPlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/esm\")\n\t\t\t\t\t.tap(\"HarmonyModulesPlugin\", handler);\n\t\t\t}\n\t\t);\n\t}\n}\nmodule.exports = HarmonyModulesPlugin;\n"]},"metadata":{},"sourceType":"script"}