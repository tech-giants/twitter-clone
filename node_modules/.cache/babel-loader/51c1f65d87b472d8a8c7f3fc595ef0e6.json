{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Stats = require(\"./Stats\");\n\nclass Watching {\n  constructor(compiler, watchOptions, handler) {\n    this.startTime = null;\n    this.invalid = false;\n    this.handler = handler;\n    this.callbacks = [];\n    this.closed = false;\n    this.suspended = false;\n\n    if (typeof watchOptions === \"number\") {\n      this.watchOptions = {\n        aggregateTimeout: watchOptions\n      };\n    } else if (watchOptions && typeof watchOptions === \"object\") {\n      this.watchOptions = Object.assign({}, watchOptions);\n    } else {\n      this.watchOptions = {};\n    }\n\n    this.watchOptions.aggregateTimeout = this.watchOptions.aggregateTimeout || 200;\n    this.compiler = compiler;\n    this.running = true;\n    this.compiler.readRecords(err => {\n      if (err) return this._done(err);\n\n      this._go();\n    });\n  }\n\n  _go() {\n    this.startTime = Date.now();\n    this.running = true;\n    this.invalid = false;\n    this.compiler.hooks.watchRun.callAsync(this.compiler, err => {\n      if (err) return this._done(err);\n\n      const onCompiled = (err, compilation) => {\n        if (err) return this._done(err);\n        if (this.invalid) return this._done();\n\n        if (this.compiler.hooks.shouldEmit.call(compilation) === false) {\n          return this._done(null, compilation);\n        }\n\n        this.compiler.emitAssets(compilation, err => {\n          if (err) return this._done(err);\n          if (this.invalid) return this._done();\n          this.compiler.emitRecords(err => {\n            if (err) return this._done(err);\n\n            if (compilation.hooks.needAdditionalPass.call()) {\n              compilation.needAdditionalPass = true;\n              const stats = new Stats(compilation);\n              stats.startTime = this.startTime;\n              stats.endTime = Date.now();\n              this.compiler.hooks.done.callAsync(stats, err => {\n                if (err) return this._done(err);\n                this.compiler.hooks.additionalPass.callAsync(err => {\n                  if (err) return this._done(err);\n                  this.compiler.compile(onCompiled);\n                });\n              });\n              return;\n            }\n\n            return this._done(null, compilation);\n          });\n        });\n      };\n\n      this.compiler.compile(onCompiled);\n    });\n  }\n\n  _getStats(compilation) {\n    const stats = new Stats(compilation);\n    stats.startTime = this.startTime;\n    stats.endTime = Date.now();\n    return stats;\n  }\n\n  _done(err, compilation) {\n    this.running = false;\n    if (this.invalid) return this._go();\n    const stats = compilation ? this._getStats(compilation) : null;\n\n    if (err) {\n      this.compiler.hooks.failed.call(err);\n      this.handler(err, stats);\n      return;\n    }\n\n    this.compiler.hooks.done.callAsync(stats, () => {\n      this.handler(null, stats);\n\n      if (!this.closed) {\n        this.watch(Array.from(compilation.fileDependencies), Array.from(compilation.contextDependencies), Array.from(compilation.missingDependencies));\n      }\n\n      for (const cb of this.callbacks) cb();\n\n      this.callbacks.length = 0;\n    });\n  }\n\n  watch(files, dirs, missing) {\n    this.pausedWatcher = null;\n    this.watcher = this.compiler.watchFileSystem.watch(files, dirs, missing, this.startTime, this.watchOptions, (err, filesModified, contextModified, missingModified, fileTimestamps, contextTimestamps, removedFiles) => {\n      this.pausedWatcher = this.watcher;\n      this.watcher = null;\n\n      if (err) {\n        return this.handler(err);\n      }\n\n      this.compiler.fileTimestamps = fileTimestamps;\n      this.compiler.contextTimestamps = contextTimestamps;\n      this.compiler.removedFiles = removedFiles;\n\n      if (!this.suspended) {\n        this._invalidate();\n      }\n    }, (fileName, changeTime) => {\n      this.compiler.hooks.invalid.call(fileName, changeTime);\n    });\n  }\n\n  invalidate(callback) {\n    if (callback) {\n      this.callbacks.push(callback);\n    }\n\n    if (this.watcher) {\n      this.compiler.fileTimestamps = this.watcher.getFileTimestamps();\n      this.compiler.contextTimestamps = this.watcher.getContextTimestamps();\n    }\n\n    return this._invalidate();\n  }\n\n  _invalidate() {\n    if (this.watcher) {\n      this.pausedWatcher = this.watcher;\n      this.watcher.pause();\n      this.watcher = null;\n    }\n\n    if (this.running) {\n      this.invalid = true;\n      return false;\n    } else {\n      this._go();\n    }\n  }\n\n  suspend() {\n    this.suspended = true;\n    this.invalid = false;\n  }\n\n  resume() {\n    if (this.suspended) {\n      this.suspended = false;\n\n      this._invalidate();\n    }\n  }\n\n  close(callback) {\n    const finalCallback = () => {\n      this.compiler.hooks.watchClose.call();\n      this.compiler.running = false;\n      this.compiler.watchMode = false;\n      if (callback !== undefined) callback();\n    };\n\n    this.closed = true;\n\n    if (this.watcher) {\n      this.watcher.close();\n      this.watcher = null;\n    }\n\n    if (this.pausedWatcher) {\n      this.pausedWatcher.close();\n      this.pausedWatcher = null;\n    }\n\n    if (this.running) {\n      this.invalid = true;\n      this._done = finalCallback;\n    } else {\n      finalCallback();\n    }\n  }\n\n}\n\nmodule.exports = Watching;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/Watching.js"],"names":["Stats","require","Watching","constructor","compiler","watchOptions","handler","startTime","invalid","callbacks","closed","suspended","aggregateTimeout","Object","assign","running","readRecords","err","_done","_go","Date","now","hooks","watchRun","callAsync","onCompiled","compilation","shouldEmit","call","emitAssets","emitRecords","needAdditionalPass","stats","endTime","done","additionalPass","compile","_getStats","failed","watch","Array","from","fileDependencies","contextDependencies","missingDependencies","cb","length","files","dirs","missing","pausedWatcher","watcher","watchFileSystem","filesModified","contextModified","missingModified","fileTimestamps","contextTimestamps","removedFiles","_invalidate","fileName","changeTime","invalidate","callback","push","getFileTimestamps","getContextTimestamps","pause","suspend","resume","close","finalCallback","watchClose","watchMode","undefined","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Stats = require(\"./Stats\");\n\nclass Watching {\n\tconstructor(compiler, watchOptions, handler) {\n\t\tthis.startTime = null;\n\t\tthis.invalid = false;\n\t\tthis.handler = handler;\n\t\tthis.callbacks = [];\n\t\tthis.closed = false;\n\t\tthis.suspended = false;\n\t\tif (typeof watchOptions === \"number\") {\n\t\t\tthis.watchOptions = {\n\t\t\t\taggregateTimeout: watchOptions\n\t\t\t};\n\t\t} else if (watchOptions && typeof watchOptions === \"object\") {\n\t\t\tthis.watchOptions = Object.assign({}, watchOptions);\n\t\t} else {\n\t\t\tthis.watchOptions = {};\n\t\t}\n\t\tthis.watchOptions.aggregateTimeout =\n\t\t\tthis.watchOptions.aggregateTimeout || 200;\n\t\tthis.compiler = compiler;\n\t\tthis.running = true;\n\t\tthis.compiler.readRecords(err => {\n\t\t\tif (err) return this._done(err);\n\n\t\t\tthis._go();\n\t\t});\n\t}\n\n\t_go() {\n\t\tthis.startTime = Date.now();\n\t\tthis.running = true;\n\t\tthis.invalid = false;\n\t\tthis.compiler.hooks.watchRun.callAsync(this.compiler, err => {\n\t\t\tif (err) return this._done(err);\n\t\t\tconst onCompiled = (err, compilation) => {\n\t\t\t\tif (err) return this._done(err);\n\t\t\t\tif (this.invalid) return this._done();\n\n\t\t\t\tif (this.compiler.hooks.shouldEmit.call(compilation) === false) {\n\t\t\t\t\treturn this._done(null, compilation);\n\t\t\t\t}\n\n\t\t\t\tthis.compiler.emitAssets(compilation, err => {\n\t\t\t\t\tif (err) return this._done(err);\n\t\t\t\t\tif (this.invalid) return this._done();\n\t\t\t\t\tthis.compiler.emitRecords(err => {\n\t\t\t\t\t\tif (err) return this._done(err);\n\n\t\t\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n\t\t\t\t\t\t\tcompilation.needAdditionalPass = true;\n\n\t\t\t\t\t\t\tconst stats = new Stats(compilation);\n\t\t\t\t\t\t\tstats.startTime = this.startTime;\n\t\t\t\t\t\t\tstats.endTime = Date.now();\n\t\t\t\t\t\t\tthis.compiler.hooks.done.callAsync(stats, err => {\n\t\t\t\t\t\t\t\tif (err) return this._done(err);\n\n\t\t\t\t\t\t\t\tthis.compiler.hooks.additionalPass.callAsync(err => {\n\t\t\t\t\t\t\t\t\tif (err) return this._done(err);\n\t\t\t\t\t\t\t\t\tthis.compiler.compile(onCompiled);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this._done(null, compilation);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\t\t\tthis.compiler.compile(onCompiled);\n\t\t});\n\t}\n\n\t_getStats(compilation) {\n\t\tconst stats = new Stats(compilation);\n\t\tstats.startTime = this.startTime;\n\t\tstats.endTime = Date.now();\n\t\treturn stats;\n\t}\n\n\t_done(err, compilation) {\n\t\tthis.running = false;\n\t\tif (this.invalid) return this._go();\n\n\t\tconst stats = compilation ? this._getStats(compilation) : null;\n\t\tif (err) {\n\t\t\tthis.compiler.hooks.failed.call(err);\n\t\t\tthis.handler(err, stats);\n\t\t\treturn;\n\t\t}\n\t\tthis.compiler.hooks.done.callAsync(stats, () => {\n\t\t\tthis.handler(null, stats);\n\t\t\tif (!this.closed) {\n\t\t\t\tthis.watch(\n\t\t\t\t\tArray.from(compilation.fileDependencies),\n\t\t\t\t\tArray.from(compilation.contextDependencies),\n\t\t\t\t\tArray.from(compilation.missingDependencies)\n\t\t\t\t);\n\t\t\t}\n\t\t\tfor (const cb of this.callbacks) cb();\n\t\t\tthis.callbacks.length = 0;\n\t\t});\n\t}\n\n\twatch(files, dirs, missing) {\n\t\tthis.pausedWatcher = null;\n\t\tthis.watcher = this.compiler.watchFileSystem.watch(\n\t\t\tfiles,\n\t\t\tdirs,\n\t\t\tmissing,\n\t\t\tthis.startTime,\n\t\t\tthis.watchOptions,\n\t\t\t(\n\t\t\t\terr,\n\t\t\t\tfilesModified,\n\t\t\t\tcontextModified,\n\t\t\t\tmissingModified,\n\t\t\t\tfileTimestamps,\n\t\t\t\tcontextTimestamps,\n\t\t\t\tremovedFiles\n\t\t\t) => {\n\t\t\t\tthis.pausedWatcher = this.watcher;\n\t\t\t\tthis.watcher = null;\n\t\t\t\tif (err) {\n\t\t\t\t\treturn this.handler(err);\n\t\t\t\t}\n\t\t\t\tthis.compiler.fileTimestamps = fileTimestamps;\n\t\t\t\tthis.compiler.contextTimestamps = contextTimestamps;\n\t\t\t\tthis.compiler.removedFiles = removedFiles;\n\t\t\t\tif (!this.suspended) {\n\t\t\t\t\tthis._invalidate();\n\t\t\t\t}\n\t\t\t},\n\t\t\t(fileName, changeTime) => {\n\t\t\t\tthis.compiler.hooks.invalid.call(fileName, changeTime);\n\t\t\t}\n\t\t);\n\t}\n\n\tinvalidate(callback) {\n\t\tif (callback) {\n\t\t\tthis.callbacks.push(callback);\n\t\t}\n\t\tif (this.watcher) {\n\t\t\tthis.compiler.fileTimestamps = this.watcher.getFileTimestamps();\n\t\t\tthis.compiler.contextTimestamps = this.watcher.getContextTimestamps();\n\t\t}\n\t\treturn this._invalidate();\n\t}\n\n\t_invalidate() {\n\t\tif (this.watcher) {\n\t\t\tthis.pausedWatcher = this.watcher;\n\t\t\tthis.watcher.pause();\n\t\t\tthis.watcher = null;\n\t\t}\n\n\t\tif (this.running) {\n\t\t\tthis.invalid = true;\n\t\t\treturn false;\n\t\t} else {\n\t\t\tthis._go();\n\t\t}\n\t}\n\n\tsuspend() {\n\t\tthis.suspended = true;\n\t\tthis.invalid = false;\n\t}\n\n\tresume() {\n\t\tif (this.suspended) {\n\t\t\tthis.suspended = false;\n\t\t\tthis._invalidate();\n\t\t}\n\t}\n\n\tclose(callback) {\n\t\tconst finalCallback = () => {\n\t\t\tthis.compiler.hooks.watchClose.call();\n\t\t\tthis.compiler.running = false;\n\t\t\tthis.compiler.watchMode = false;\n\t\t\tif (callback !== undefined) callback();\n\t\t};\n\n\t\tthis.closed = true;\n\t\tif (this.watcher) {\n\t\t\tthis.watcher.close();\n\t\t\tthis.watcher = null;\n\t\t}\n\t\tif (this.pausedWatcher) {\n\t\t\tthis.pausedWatcher.close();\n\t\t\tthis.pausedWatcher = null;\n\t\t}\n\t\tif (this.running) {\n\t\t\tthis.invalid = true;\n\t\t\tthis._done = finalCallback;\n\t\t} else {\n\t\t\tfinalCallback();\n\t\t}\n\t}\n}\n\nmodule.exports = Watching;\n"]},"metadata":{},"sourceType":"script"}