{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst forEachBail = require(\"./forEachBail\");\n\nfunction loadDescriptionFile(resolver, directory, filenames, resolveContext, callback) {\n  (function findDescriptionFile() {\n    forEachBail(filenames, (filename, callback) => {\n      const descriptionFilePath = resolver.join(directory, filename);\n\n      if (resolver.fileSystem.readJson) {\n        resolver.fileSystem.readJson(descriptionFilePath, (err, content) => {\n          if (err) {\n            if (typeof err.code !== \"undefined\") return callback();\n            return onJson(err);\n          }\n\n          onJson(null, content);\n        });\n      } else {\n        resolver.fileSystem.readFile(descriptionFilePath, (err, content) => {\n          if (err) return callback();\n          let json;\n\n          try {\n            json = JSON.parse(content);\n          } catch (e) {\n            onJson(e);\n          }\n\n          onJson(null, json);\n        });\n      }\n\n      function onJson(err, content) {\n        if (err) {\n          if (resolveContext.log) resolveContext.log(descriptionFilePath + \" (directory description file): \" + err);else err.message = descriptionFilePath + \" (directory description file): \" + err;\n          return callback(err);\n        }\n\n        callback(null, {\n          content: content,\n          directory: directory,\n          path: descriptionFilePath\n        });\n      }\n    }, (err, result) => {\n      if (err) return callback(err);\n\n      if (result) {\n        return callback(null, result);\n      } else {\n        directory = cdUp(directory);\n\n        if (!directory) {\n          return callback();\n        } else {\n          return findDescriptionFile();\n        }\n      }\n    });\n  })();\n}\n\nfunction getField(content, field) {\n  if (!content) return undefined;\n\n  if (Array.isArray(field)) {\n    let current = content;\n\n    for (let j = 0; j < field.length; j++) {\n      if (current === null || typeof current !== \"object\") {\n        current = null;\n        break;\n      }\n\n      current = current[field[j]];\n    }\n\n    if (typeof current === \"object\") {\n      return current;\n    }\n  } else {\n    if (typeof content[field] === \"object\") {\n      return content[field];\n    }\n  }\n}\n\nfunction cdUp(directory) {\n  if (directory === \"/\") return null;\n  const i = directory.lastIndexOf(\"/\"),\n        j = directory.lastIndexOf(\"\\\\\");\n  const p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\n  if (p < 0) return null;\n  return directory.substr(0, p || 1);\n}\n\nexports.loadDescriptionFile = loadDescriptionFile;\nexports.getField = getField;\nexports.cdUp = cdUp;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/enhanced-resolve/lib/DescriptionFileUtils.js"],"names":["forEachBail","require","loadDescriptionFile","resolver","directory","filenames","resolveContext","callback","findDescriptionFile","filename","descriptionFilePath","join","fileSystem","readJson","err","content","code","onJson","readFile","json","JSON","parse","e","log","message","path","result","cdUp","getField","field","undefined","Array","isArray","current","j","length","i","lastIndexOf","p","substr","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst forEachBail = require(\"./forEachBail\");\n\nfunction loadDescriptionFile(\n\tresolver,\n\tdirectory,\n\tfilenames,\n\tresolveContext,\n\tcallback\n) {\n\t(function findDescriptionFile() {\n\t\tforEachBail(\n\t\t\tfilenames,\n\t\t\t(filename, callback) => {\n\t\t\t\tconst descriptionFilePath = resolver.join(directory, filename);\n\t\t\t\tif (resolver.fileSystem.readJson) {\n\t\t\t\t\tresolver.fileSystem.readJson(descriptionFilePath, (err, content) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tif (typeof err.code !== \"undefined\") return callback();\n\t\t\t\t\t\t\treturn onJson(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonJson(null, content);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tresolver.fileSystem.readFile(descriptionFilePath, (err, content) => {\n\t\t\t\t\t\tif (err) return callback();\n\t\t\t\t\t\tlet json;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tjson = JSON.parse(content);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tonJson(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonJson(null, json);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction onJson(err, content) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (resolveContext.log)\n\t\t\t\t\t\t\tresolveContext.log(\n\t\t\t\t\t\t\t\tdescriptionFilePath + \" (directory description file): \" + err\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\terr.message =\n\t\t\t\t\t\t\t\tdescriptionFilePath + \" (directory description file): \" + err;\n\t\t\t\t\t\treturn callback(err);\n\t\t\t\t\t}\n\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\tdirectory: directory,\n\t\t\t\t\t\tpath: descriptionFilePath\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err, result) => {\n\t\t\t\tif (err) return callback(err);\n\t\t\t\tif (result) {\n\t\t\t\t\treturn callback(null, result);\n\t\t\t\t} else {\n\t\t\t\t\tdirectory = cdUp(directory);\n\t\t\t\t\tif (!directory) {\n\t\t\t\t\t\treturn callback();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn findDescriptionFile();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t})();\n}\n\nfunction getField(content, field) {\n\tif (!content) return undefined;\n\tif (Array.isArray(field)) {\n\t\tlet current = content;\n\t\tfor (let j = 0; j < field.length; j++) {\n\t\t\tif (current === null || typeof current !== \"object\") {\n\t\t\t\tcurrent = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent = current[field[j]];\n\t\t}\n\t\tif (typeof current === \"object\") {\n\t\t\treturn current;\n\t\t}\n\t} else {\n\t\tif (typeof content[field] === \"object\") {\n\t\t\treturn content[field];\n\t\t}\n\t}\n}\n\nfunction cdUp(directory) {\n\tif (directory === \"/\") return null;\n\tconst i = directory.lastIndexOf(\"/\"),\n\t\tj = directory.lastIndexOf(\"\\\\\");\n\tconst p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\n\tif (p < 0) return null;\n\treturn directory.substr(0, p || 1);\n}\n\nexports.loadDescriptionFile = loadDescriptionFile;\nexports.getField = getField;\nexports.cdUp = cdUp;\n"]},"metadata":{},"sourceType":"script"}