{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ParserHelpers = require(\"./ParserHelpers\");\n\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\n\nconst NullFactory = require(\"./NullFactory\");\n\nclass ProvidePlugin {\n  constructor(definitions) {\n    this.definitions = definitions;\n  }\n\n  apply(compiler) {\n    const definitions = this.definitions;\n    compiler.hooks.compilation.tap(\"ProvidePlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(ConstDependency, new NullFactory());\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n\n      const handler = (parser, parserOptions) => {\n        Object.keys(definitions).forEach(name => {\n          var request = [].concat(definitions[name]);\n          var splittedName = name.split(\".\");\n\n          if (splittedName.length > 0) {\n            splittedName.slice(1).forEach((_, i) => {\n              const name = splittedName.slice(0, i + 1).join(\".\");\n              parser.hooks.canRename.for(name).tap(\"ProvidePlugin\", ParserHelpers.approve);\n            });\n          }\n\n          parser.hooks.expression.for(name).tap(\"ProvidePlugin\", expr => {\n            let nameIdentifier = name;\n            const scopedName = name.includes(\".\");\n            let expression = `require(${JSON.stringify(request[0])})`;\n\n            if (scopedName) {\n              nameIdentifier = `__webpack_provided_${name.replace(/\\./g, \"_dot_\")}`;\n            }\n\n            if (request.length > 1) {\n              expression += request.slice(1).map(r => `[${JSON.stringify(r)}]`).join(\"\");\n            }\n\n            if (!ParserHelpers.addParsedVariableToModule(parser, nameIdentifier, expression)) {\n              return false;\n            }\n\n            if (scopedName) {\n              ParserHelpers.toConstantDependency(parser, nameIdentifier)(expr);\n            }\n\n            return true;\n          });\n        });\n      };\n\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"ProvidePlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"ProvidePlugin\", handler); // Disable ProvidePlugin for javascript/esm, see https://github.com/webpack/webpack/issues/7032\n    });\n  }\n\n}\n\nmodule.exports = ProvidePlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/ProvidePlugin.js"],"names":["ParserHelpers","require","ConstDependency","NullFactory","ProvidePlugin","constructor","definitions","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencyTemplates","Template","handler","parser","parserOptions","Object","keys","forEach","name","request","concat","splittedName","split","length","slice","_","i","join","canRename","for","approve","expression","expr","nameIdentifier","scopedName","includes","JSON","stringify","replace","map","r","addParsedVariableToModule","toConstantDependency","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ParserHelpers = require(\"./ParserHelpers\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\n\nconst NullFactory = require(\"./NullFactory\");\n\nclass ProvidePlugin {\n\tconstructor(definitions) {\n\t\tthis.definitions = definitions;\n\t}\n\n\tapply(compiler) {\n\t\tconst definitions = this.definitions;\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"ProvidePlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(ConstDependency, new NullFactory());\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tConstDependency,\n\t\t\t\t\tnew ConstDependency.Template()\n\t\t\t\t);\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tObject.keys(definitions).forEach(name => {\n\t\t\t\t\t\tvar request = [].concat(definitions[name]);\n\t\t\t\t\t\tvar splittedName = name.split(\".\");\n\t\t\t\t\t\tif (splittedName.length > 0) {\n\t\t\t\t\t\t\tsplittedName.slice(1).forEach((_, i) => {\n\t\t\t\t\t\t\t\tconst name = splittedName.slice(0, i + 1).join(\".\");\n\t\t\t\t\t\t\t\tparser.hooks.canRename\n\t\t\t\t\t\t\t\t\t.for(name)\n\t\t\t\t\t\t\t\t\t.tap(\"ProvidePlugin\", ParserHelpers.approve);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparser.hooks.expression.for(name).tap(\"ProvidePlugin\", expr => {\n\t\t\t\t\t\t\tlet nameIdentifier = name;\n\t\t\t\t\t\t\tconst scopedName = name.includes(\".\");\n\t\t\t\t\t\t\tlet expression = `require(${JSON.stringify(request[0])})`;\n\t\t\t\t\t\t\tif (scopedName) {\n\t\t\t\t\t\t\t\tnameIdentifier = `__webpack_provided_${name.replace(\n\t\t\t\t\t\t\t\t\t/\\./g,\n\t\t\t\t\t\t\t\t\t\"_dot_\"\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (request.length > 1) {\n\t\t\t\t\t\t\t\texpression += request\n\t\t\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t\t\t.map(r => `[${JSON.stringify(r)}]`)\n\t\t\t\t\t\t\t\t\t.join(\"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!ParserHelpers.addParsedVariableToModule(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tnameIdentifier,\n\t\t\t\t\t\t\t\t\texpression\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (scopedName) {\n\t\t\t\t\t\t\t\tParserHelpers.toConstantDependency(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tnameIdentifier\n\t\t\t\t\t\t\t\t)(expr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t.tap(\"ProvidePlugin\", handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(\"javascript/dynamic\")\n\t\t\t\t\t.tap(\"ProvidePlugin\", handler);\n\n\t\t\t\t// Disable ProvidePlugin for javascript/esm, see https://github.com/webpack/webpack/issues/7032\n\t\t\t}\n\t\t);\n\t}\n}\nmodule.exports = ProvidePlugin;\n"]},"metadata":{},"sourceType":"script"}