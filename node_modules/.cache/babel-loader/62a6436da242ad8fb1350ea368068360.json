{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass AggressiveMergingPlugin {\n  constructor(options) {\n    if (options !== undefined && typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\"Argument should be an options object. To use defaults, pass in nothing.\\nFor more info on options, see https://webpack.js.org/plugins/\");\n    }\n\n    this.options = options || {};\n  }\n\n  apply(compiler) {\n    const options = this.options;\n    const minSizeReduce = options.minSizeReduce || 1.5;\n    compiler.hooks.thisCompilation.tap(\"AggressiveMergingPlugin\", compilation => {\n      compilation.hooks.optimizeChunksAdvanced.tap(\"AggressiveMergingPlugin\", chunks => {\n        let combinations = [];\n        chunks.forEach((a, idx) => {\n          if (a.canBeInitial()) return;\n\n          for (let i = 0; i < idx; i++) {\n            const b = chunks[i];\n            if (b.canBeInitial()) continue;\n            combinations.push({\n              a,\n              b,\n              improvement: undefined\n            });\n          }\n        });\n\n        for (const pair of combinations) {\n          const a = pair.b.size({\n            chunkOverhead: 0\n          });\n          const b = pair.a.size({\n            chunkOverhead: 0\n          });\n          const ab = pair.b.integratedSize(pair.a, {\n            chunkOverhead: 0\n          });\n          let newSize;\n\n          if (ab === false) {\n            pair.improvement = false;\n            return;\n          } else {\n            newSize = ab;\n          }\n\n          pair.improvement = (a + b) / newSize;\n        }\n\n        combinations = combinations.filter(pair => {\n          return pair.improvement !== false;\n        });\n        combinations.sort((a, b) => {\n          return b.improvement - a.improvement;\n        });\n        const pair = combinations[0];\n        if (!pair) return;\n        if (pair.improvement < minSizeReduce) return;\n\n        if (pair.b.integrate(pair.a, \"aggressive-merge\")) {\n          chunks.splice(chunks.indexOf(pair.a), 1);\n          return true;\n        }\n      });\n    });\n  }\n\n}\n\nmodule.exports = AggressiveMergingPlugin;","map":{"version":3,"sources":["/Users/hamzakhan/Documents/twitter-react/twitter/node_modules/webpack/lib/optimize/AggressiveMergingPlugin.js"],"names":["AggressiveMergingPlugin","constructor","options","undefined","Array","isArray","Error","apply","compiler","minSizeReduce","hooks","thisCompilation","tap","compilation","optimizeChunksAdvanced","chunks","combinations","forEach","a","idx","canBeInitial","i","b","push","improvement","pair","size","chunkOverhead","ab","integratedSize","newSize","filter","sort","integrate","splice","indexOf","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass AggressiveMergingPlugin {\n\tconstructor(options) {\n\t\tif (\n\t\t\t(options !== undefined && typeof options !== \"object\") ||\n\t\t\tArray.isArray(options)\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Argument should be an options object. To use defaults, pass in nothing.\\nFor more info on options, see https://webpack.js.org/plugins/\"\n\t\t\t);\n\t\t}\n\t\tthis.options = options || {};\n\t}\n\n\tapply(compiler) {\n\t\tconst options = this.options;\n\t\tconst minSizeReduce = options.minSizeReduce || 1.5;\n\n\t\tcompiler.hooks.thisCompilation.tap(\n\t\t\t\"AggressiveMergingPlugin\",\n\t\t\tcompilation => {\n\t\t\t\tcompilation.hooks.optimizeChunksAdvanced.tap(\n\t\t\t\t\t\"AggressiveMergingPlugin\",\n\t\t\t\t\tchunks => {\n\t\t\t\t\t\tlet combinations = [];\n\t\t\t\t\t\tchunks.forEach((a, idx) => {\n\t\t\t\t\t\t\tif (a.canBeInitial()) return;\n\t\t\t\t\t\t\tfor (let i = 0; i < idx; i++) {\n\t\t\t\t\t\t\t\tconst b = chunks[i];\n\t\t\t\t\t\t\t\tif (b.canBeInitial()) continue;\n\t\t\t\t\t\t\t\tcombinations.push({\n\t\t\t\t\t\t\t\t\ta,\n\t\t\t\t\t\t\t\t\tb,\n\t\t\t\t\t\t\t\t\timprovement: undefined\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfor (const pair of combinations) {\n\t\t\t\t\t\t\tconst a = pair.b.size({\n\t\t\t\t\t\t\t\tchunkOverhead: 0\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst b = pair.a.size({\n\t\t\t\t\t\t\t\tchunkOverhead: 0\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst ab = pair.b.integratedSize(pair.a, {\n\t\t\t\t\t\t\t\tchunkOverhead: 0\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet newSize;\n\t\t\t\t\t\t\tif (ab === false) {\n\t\t\t\t\t\t\t\tpair.improvement = false;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewSize = ab;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpair.improvement = (a + b) / newSize;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcombinations = combinations.filter(pair => {\n\t\t\t\t\t\t\treturn pair.improvement !== false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcombinations.sort((a, b) => {\n\t\t\t\t\t\t\treturn b.improvement - a.improvement;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst pair = combinations[0];\n\n\t\t\t\t\t\tif (!pair) return;\n\t\t\t\t\t\tif (pair.improvement < minSizeReduce) return;\n\n\t\t\t\t\t\tif (pair.b.integrate(pair.a, \"aggressive-merge\")) {\n\t\t\t\t\t\t\tchunks.splice(chunks.indexOf(pair.a), 1);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = AggressiveMergingPlugin;\n"]},"metadata":{},"sourceType":"script"}